–¢—ã ‚Äî senior fullstack (Node.js + TypeScript + MongoDB + React + Telegraf) –≤ –ø—Ä–æ–µ–∫—Ç–µ KETMAR Market.

–ù—É–∂–Ω–æ –î–û–ü–ò–õ–ò–¢–¨ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª ‚Äú–ò–∑–±—Ä–∞–Ω–Ω–æ–µ‚Äù:

1) –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ —Å–µ—Ä–¥–µ—á–∫–æ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:
   - –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤–æ –≤–∫–ª–∞–¥–∫—É ¬´–ò–∑–±—Ä–∞–Ω–Ω–æ–µ¬ª –≤ MiniApp.
   - –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î.

2) –ï—Å–ª–∏ –ø–æ –∏–∑–±—Ä–∞–Ω–Ω–æ–º—É –æ–±—ä—è–≤–ª–µ–Ω–∏—é –º–µ–Ω—è–µ—Ç—Å—è:
   - —Ü–µ–Ω–∞,
   - —Å—Ç–∞—Ç—É—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–¥–∞–Ω–æ/—Å–Ω—è—Ç–æ/–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ —Å–Ω–æ–≤–∞),
   - –≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫,

   ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏—Ö–æ–¥–∏—Ç Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞.

3) –í—Å—ë —ç—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–≤–µ—Ä—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
   - –º–æ–Ω–æ—Ä–µ–ø–æ (backend + miniapp + –±–æ—Ç),
   - —É–∂–µ –µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã/—Å—Ç–∞—Ç—É—Å–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
     (updateAdPrice / updateAdStatus –∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞).

====================================
0. –û–ë–©–ò–ô –ö–û–ù–¢–ï–ö–°–¢ (–ü–†–ò–ù–Ø–¢–¨ –ö–ê–ö –î–ê–ù–û)
====================================

–°—Ç–µ–∫:
- Backend: Node.js + Express/Nest + MongoDB (Mongoose).
- MiniApp: React + TS, Telegram WebApp.
- Bot: Telegraf (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥), —É–∂–µ –µ—Å—Ç—å initData-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–∏—Å—Ç–µ–º–µ:
- –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –ø–æ Telegram userId (–∏–∑ initData).
- –µ—Å—Ç—å –º–æ–¥–µ–ª—å `User` —Å –ø–æ–ª–µ–º `telegramId`.

–ï—Å—Ç—å –º–æ–¥–µ–ª—å `Ad` (–æ–±—ä—è–≤–ª–µ–Ω–∏–µ) —Å –ø–æ–ª—è–º–∏:
- `_id`,
- `price`,
- `status`,
- `title`,
- `ownerTelegramId` –∏ —Ç.–ø.

–ï—Å—Ç—å/–±—É–¥–µ—Ç —Å–µ—Ä–≤–∏—Å:

```ts
async function updateAdPrice(adId: string, newPrice: number) { ... }
async function updateAdStatus(adId: string, newStatus: AdStatus) { ... }
–¢–´ –î–û–õ–ñ–ï–ù –Ω–∞–¥—Å—Ç—Ä–æ–∏—Ç—å—Å—è –Ω–∞ —ç—Ç–æ–º.

====================================

–ú–û–î–ï–õ–¨ –ò–ó–ë–†–ê–ù–ù–û–ì–û (MongoDB)
====================================

–°–æ–∑–¥–∞–π / –æ–±–Ω–æ–≤–∏ –º–æ–¥–µ–ª—å Favorite (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥).

ts
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
interface Favorite {
  _id: ObjectId;
  userTelegramId: number; // –∫—Ç–æ –ø–æ–¥–ø–∏—Å–∞–ª—Å—è
  adId: ObjectId;         // –Ω–∞ –∫–∞–∫–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
  createdAt: Date;

  // –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  notifyOnPriceChange: boolean;  // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true
  notifyOnStatusChange: boolean; // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true
  isActive: boolean;             // –º—è–≥–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
}
–ò–Ω–¥–µ–∫—Å—ã:

ts
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
FavoriteSchema.index({ userTelegramId: 1, adId: 1 }, { unique: true });
FavoriteSchema.index({ adId: 1, isActive: 1 });
–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏.

====================================
2. BACKEND API –î–õ–Ø MINIAPP (–ò–ó–ë–†–ê–ù–ù–û–ï)
–ù—É–∂–Ω–æ 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö endpoint‚Äô–∞:

–¢–æ–≥–≥–ª –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

POST /api/favorites/toggle

Body:

json
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
{
  "adId": "....",
  "notifyOnPriceChange": true,  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "notifyOnStatusChange": true  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:

—á–µ—Ä–µ–∑ initData ‚Üí –µ—Å—Ç—å req.currentUser.telegramId.

–õ–æ–≥–∏–∫–∞:

–µ—Å–ª–∏ –∑–∞–ø–∏—Å—å Favorite (userTelegramId + adId) –µ—Å—Ç—å –∏ isActive=true ‚Üí

–ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤ isActive=false (—É–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ).

–µ—Å–ª–∏ –∑–∞–ø–∏—Å–∏ –Ω–µ—Ç –∏–ª–∏ isActive=false ‚Üí

—Å–æ–∑–¥–∞—Ç—å/–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å:

isActive=true,

notifyOnPriceChange=true (–µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ),

notifyOnStatusChange=true.

–û—Ç–≤–µ—Ç:

json
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
{ "isFavorite": true, "notifyOnPriceChange": true, "notifyOnStatusChange": true }
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

GET /api/favorites/my

–Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ Favorite –ø–æ userTelegramId, –≥–¥–µ isActive=true,

–¥–∂–æ–π–Ω–∏—Ç (populate) Ad,

–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –Ω—É–∂–Ω–æ–º MiniApp.

–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

PATCH /api/favorites/:adId/settings

Body:

json
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
{
  "notifyOnPriceChange": true,
  "notifyOnStatusChange": false
}
====================================
3. MINIAPP: –ò–ö–û–ù–ö–ê –°–ï–†–î–ï–ß–ö–ê + –í–ö–õ–ê–î–ö–ê ¬´–ò–ó–ë–†–ê–ù–ù–û–ï¬ª
–ù–∞–π–¥–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è: AdCard / AdCardSmall.

–î–æ–±–∞–≤—å –ø—Ä–æ–ø—Å—ã:

ts
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
interface AdCardProps {
  ad: Ad;
  isFavorite: boolean;
  onToggleFavorite?: (adId: string, next: boolean) => void;
}
–û—Ç—Ä–∏—Å—É–π —Å–µ—Ä–¥–µ—á–∫–æ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –∫–∞—Ä—Ç–æ—á–∫–∏:

–ø—É—Å—Ç–æ–µ (outline), –µ—Å–ª–∏ isFavorite=false,

–∑–∞–ª–∏—Ç–æ–µ, –µ—Å–ª–∏ isFavorite=true.

–ü—Ä–∏ –∫–ª–∏–∫–µ:

–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ –º–µ–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–¥–µ—á–∫–∞,

–≤—ã–∑—ã–≤–∞–µ–º API POST /api/favorites/toggle:

–µ—Å–ª–∏ —É–ø–∞–ª–æ ‚Äî –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º Snackbar/Toast.

–í–∫–ª–∞–¥–∫–∞ ¬´–ò–∑–±—Ä–∞–Ω–Ω–æ–µ¬ª –≤ –Ω–∏–∂–Ω–µ–º —Ç–∞–±–±–∞—Ä–µ —É–∂–µ –µ—Å—Ç—å (—Å–µ—Ä–¥–µ—á–∫–æ).
–ù—É–∂–Ω–æ:

—ç–∫—Ä–∞–Ω FavoritesScreen / FavoritesPage:

–ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏:

–∑–∞–ø—Ä–æ—Å GET /api/favorites/my,

–æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ç–∞–∫–æ–π –∂–µ —Å–µ—Ç–∫–æ–π/—Å–ø–∏—Å–∫–æ–º, –∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–π –ª–µ–Ω—Ç–µ,

–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º —Ç–µ –∂–µ —Ñ–∏–ª—å—Ç—Ä—ã/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É (–ø–æ –∂–µ–ª–∞–Ω–∏—é).

====================================
4. –°–í–Ø–ó–ö–ê –° –°–ï–†–í–ò–°–û–ú –ò–ó–ú–ï–ù–ï–ù–ò–Ø –¶–ï–ù–´/–°–¢–ê–¢–£–°–ê
–í —Å–µ—Ä–≤–∏—Å–µ updateAdPrice –∏ updateAdStatus –Ω—É–∂–Ω–æ:

–°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å—Ç–∞—Ä–æ–µ –∏ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

–ï—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å ‚Üí –ù–ï —Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è ‚Üí —Ç–æ–∂–µ.

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î:

–Ω–∞–π—Ç–∏ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤:

ts
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
const favorites = await Favorite.find({
  adId,
  isActive: true,
  $or: [
    { notifyOnPriceChange: true }, // –¥–ª—è —Ü–µ–Ω—ã
    ...
  ]
});
–î–ª—è –∫–∞–∂–¥–æ–≥–æ Favorite —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –¥–ª—è –±–æ—Ç–∞:

–º–æ–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é Notification (–æ—á–µ—Ä–µ–¥—å),

–ª–∏–±–æ —Å—Ä–∞–∑—É –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é notifyUserAboutAdChange.

–õ—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å:

ts
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
class FavoriteNotificationService {
  async notifyPriceChanged(ad: Ad, oldPrice: number, newPrice: number) { ... }
  async notifyStatusChanged(ad: Ad, oldStatus: string, newStatus: string) { ... }
}
–∫–æ—Ç–æ—Ä—ã–π:

–Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤,

–¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç BotNotifier.sendPriceChanged(...).

====================================
5. –ë–û–¢: –û–¢–ü–†–ê–í–ö–ê TELEGRAM-–£–í–ï–î–û–ú–õ–ï–ù–ò–ô
–í –∫–æ–¥–µ –±–æ—Ç–∞ (Telegraf):

–°–æ–∑–¥–∞–π –º–æ–¥—É–ª—å bot/notifier.ts:

ts
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
import { Telegraf } from 'telegraf';

export class BotNotifier {
  constructor(private bot: Telegraf) {}

  async sendPriceChanged(telegramId: number, payload: { title: string; oldPrice: number; newPrice: number; adId: string; }) {
    const diff = payload.newPrice - payload.oldPrice;
    const diffAbs = Math.abs(diff);
    const direction = diff > 0 ? '–ø–æ–¥–Ω—è–ª–∞—Å—å' : '—Å–Ω–∏–∑–∏–ª–∞—Å—å';

    const text = [
      'üîî –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ',
      '',
      `üìå ${payload.title}`,
      `üí∞ –¶–µ–Ω–∞ ${direction}:`,
      `—Å ${payload.oldPrice} BYN –¥–æ ${payload.newPrice} BYN (—Ä–∞–∑–Ω–∏—Ü–∞ ${diffAbs} BYN)`
    ].join('\n');

    await this.bot.telegram.sendMessage(telegramId, text, {
      reply_markup: {
        inline_keyboard: [[
          {
            text: '–û—Ç–∫—Ä—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ',
            web_app: { url: `<MINIAPP_URL>?adId=${payload.adId}` }
          }
        ]]
      }
    });
  }

  async sendStatusChanged(telegramId: number, payload: { title: string; newStatus: string; adId: string; }) {
    const humanStatus = this.formatStatus(payload.newStatus);

    const text = [
      'üîî –°—Ç–∞—Ç—É—Å –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–∏–ª—Å—è',
      '',
      `üìå ${payload.title}`,
      `üìÑ –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å: ${humanStatus}`
    ].join('\n');

    await this.bot.telegram.sendMessage(telegramId, text, {
      reply_markup: {
        inline_keyboard: [[
          {
            text: '–û—Ç–∫—Ä—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ',
            web_app: { url: `<MINIAPP_URL>?adId=${payload.adId}` }
          }
        ]]
      }
    });
  }

  private formatStatus(status: string): string {
    switch (status) {
      case 'active': return '–∞–∫—Ç–∏–≤–Ω–æ';
      case 'sold': return '–ø—Ä–æ–¥–∞–Ω–æ';
      case 'archived': return '–≤ –∞—Ä—Ö–∏–≤–µ';
      default: return status;
    }
  }
}
–ü–æ–¥–∫–ª—é—á–∏ BotNotifier –≤ —Ç–æ—á–∫–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞ –∏ –ø–µ—Ä–µ–¥–∞–π –µ–≥–æ –≤ backend (—á–µ—Ä–µ–∑ DI/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–ª–∏ –∫–∞–∫ singleton).

====================================
6. –ê–ù–¢–ò-–°–ü–ê–ú / –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
–ß—Ç–æ–±—ã –Ω–µ –∑–∞—Å–ø–∞–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

–ï—Å–ª–∏ —Ü–µ–Ω–∞ –º–µ–Ω—è–µ—Ç—Å—è –º–Ω–æ–≥–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥:

–º–æ–∂–Ω–æ:

–∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ (–ø–æ–∫–∞ MVP),

–∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å rate limit: –Ω–µ —á–∞—â–µ 1 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ü–µ–Ω–µ –≤ X –º–∏–Ω—É—Ç –Ω–∞ –æ–¥–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

—Ö—Ä–∞–Ω–∏—Ç—å –≤ Favorite –ø–æ–ª–µ lastNotifiedAtPriceChange.

–ï—Å–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–Ω—è—Ç–æ/–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–æ ‚Üí –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞—Ç—å isActive=false –¥–ª—è —ç—Ç–æ–≥–æ Favorite
(—á—Ç–æ–±—ã –±–æ–ª—å—à–µ –Ω–µ —Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è).

====================================
7. FRONT-UX –î–õ–Ø –£–í–ï–î–û–ú–õ–ï–ù–ò–ô
–ù–∞ –≤–∫–ª–∞–¥–∫–µ ¬´–ò–∑–±—Ä–∞–Ω–Ω–æ–µ¬ª:

–ø–æ–¥ —Å–µ—Ä–¥–µ—á–∫–æ–º (–∏–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö) –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

–º–∞–ª–µ–Ω—å–∫–∏–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å:

‚Äú–£–≤–µ–¥–æ–º–ª—è—Ç—å –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã‚Äù (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω),

‚Äú–£–≤–µ–¥–æ–º–ª—è—Ç—å –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞‚Äù.

–≠—Ç–æ –±—É–¥–µ—Ç –¥–µ—Ä–≥–∞—Ç—å PATCH /api/favorites/:adId/settings.

–ê –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–∞–ª–µ–Ω—å–∫—É—é –∏–∫–æ–Ω–∫—É –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫–∞, –µ—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã.

====================================
8. –§–ò–ù–ê–õ: –ß–¢–û –°–î–ï–õ–ê–¢–¨
–ú–æ–¥–µ–ª—å Favorite + –∏–Ω–¥–µ–∫—Å—ã.

Backend endpoints:

POST /api/favorites/toggle

GET /api/favorites/my

PATCH /api/favorites/:adId/settings (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

–í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —Å–µ—Ä–¥–µ—á–∫–∞ –≤ –∫–∞—Ä—Ç–æ—á–∫—É + —ç–∫—Ä–∞–Ω ¬´–ò–∑–±—Ä–∞–Ω–Ω–æ–µ¬ª –≤ MiniApp.

–†–∞—Å—à–∏—Ä–∏—Ç—å updateAdPrice –∏ updateAdStatus:

–∏—Å–∫–∞—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤,

–≤—ã–∑—ã–≤–∞—Ç—å FavoriteNotificationService.

BotNotifier –≤ –±–æ—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª—å–Ω–æ —à–ª—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.

(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) rate-limit –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

====================================
9. –û–¢–ß–Å–¢ –í –ö–û–ù–¶–ï
–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

–í—ã–≤–µ–¥–∏ —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö/—Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –Ω–∞–ø—Ä.:

models/Favorite.ts ‚Äî –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ.

routes/favorites.ts ‚Äî API –¥–ª—è miniapp (toggle/my/settings).

services/FavoriteNotificationService.ts ‚Äî –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—Å—ã–ª–∫–∏.

services/adUpdateService.ts ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω –≤—ã–∑–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ —Å–º–µ–Ω–µ —Ü–µ–Ω—ã/—Å—Ç–∞—Ç—É—Å–∞.

bot/notifier.ts ‚Äî Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

miniapp/components/AdCard.tsx ‚Äî —Å–µ—Ä–¥–µ—á–∫–æ + –≤—ã–∑–æ–≤ toggle.

miniapp/screens/FavoritesScreen.tsx ‚Äî –≤–∫–ª–∞–¥–∫–∞ ‚Äú–ò–∑–±—Ä–∞–Ω–Ω–æ–µ‚Äù.

–ü—Ä–µ–¥–ª–æ–∂–∏ –≤–µ—Ç–∫—É –∏ –∫–æ–º–º–∏—Ç:

–≤–µ—Ç–∫–∞: feature/favorites-with-telegram-notify

–∫–æ–º–º–∏—Ç: feat(favorites): track favorite ads and send Telegram notifications on price/status changes