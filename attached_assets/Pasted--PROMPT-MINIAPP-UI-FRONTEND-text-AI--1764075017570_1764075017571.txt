üß† PROMPT: –¢–û–õ–¨–ö–û MINIAPP UI (FRONTEND)

–°–∫–æ–ø–∏—Ä—É–π –≤—Å—ë –º–µ–∂–¥—É ```text –∏ ``` –≤ —Å–≤–æ–µ–≥–æ AI-–∫–æ–¥–µ—Ä–∞.

–¢—ã ‚Äî senior frontend engineer.  
–ù—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å Telegram MiniApp (React + TypeScript + Telegram WebApp SDK) –¥–ª—è –≥–µ–æ–º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ LOCALHUB / KETMAR.

–¢–í–û–Ø –ó–ê–î–ê–ß–ê: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Geo-MVP –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (MiniApp UI) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π backend-–∫–æ–¥–∞.

–§–∞–∑–∞ –≤–∫–ª—é—á–∞–µ—Ç:
- LCL-1: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–µ–æ–ø–æ–∏—Å–∫–∞ –≤ UI,
- LCL-2: –∫–Ω–æ–ø–∫–∞ ¬´üìç –†—è–¥–æ–º —Å–æ –º–Ω–æ–π¬ª,
- LCL-3: –≤—ã–≤–æ–¥ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π.

–ù–∏—á–µ–≥–æ –Ω–µ –ª–æ–º–∞–π. –°–æ—Ö—Ä–∞–Ω—è–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –∫–æ–¥—Å—Ç–∞–π–ª –∏ —Ñ–∞–π–ª–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

=======================================
1. –ö–û–ù–¢–ï–ö–°–¢: –ß–¢–û –£–ñ–ï –ï–°–¢–¨ –í –ü–†–û–ï–ö–¢–ï
=======================================

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º ‚Äî –ü–†–û–ß–ò–¢–ê–ô —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–æ–π–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É MiniApp.

–û–∂–∏–¥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è ‚Äî –ø–æ–¥—Å—Ç—Ä–æ–π—Å—è):

- miniapp/src/App.tsx
- miniapp/src/pages/HomePage.tsx  (–∏–ª–∏ AdsPage.tsx, MainPage.tsx)
- miniapp/src/api/ads.ts
- miniapp/src/types/ad.ts
- miniapp/src/components/AdCard.tsx
- miniapp/src/components/FilterPanel.tsx  (–∏–ª–∏ Filters/)
- miniapp/src/hooks/ (—Å—é–¥–∞ –ø–æ–ª–æ–∂–∏–º useGeoLocation)

Backend —É–∂–µ —É–º–µ–µ—Ç:
- GET /api/ads/nearby?lat=...&lng=...&radiusKm=...
- GET /api/ads/search?lat=...&lng=...&radiusKm=...&sort=distance (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `distanceKm` –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –∏–∑ MiniApp UI.

=======================================
2. –¢–ò–ü–´: –û–ë–ù–û–í–ò–¢–¨ –ú–û–î–ï–õ–¨ Ad
=======================================

–ù–∞–π–¥–∏ —Ç–∏–ø/–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:

- miniapp/src/types/ad.ts
- –∏–ª–∏ inline-—Ç–∏–ø –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.

–î–æ–±–∞–≤—å/—É–±–µ–¥–∏c—å, —á—Ç–æ –µ—Å—Ç—å –ø–æ–ª–µ:

```ts
export interface Ad {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  distanceKm?: number; // —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–∞—Ö
}


–ù–µ –ª–æ–º–∞–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ‚Äî –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º.

=======================================
3. LCL-1 ‚Äî –•–£–ö useGeoLocation() + –ü–ê–†–ê–ú–ï–¢–†–´ –î–õ–Ø API

–¢–µ–±–µ –Ω—É–∂–Ω–æ:

—Å–¥–µ–ª–∞—Ç—å —Ö—É–∫ useGeoLocation(),

–Ω–∞—É—á–∏—Ç—å MiniApp –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å lat/lng/radiusKm/sort –≤ API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π.

3.1. –•—É–∫ useGeoLocation()

–§–∞–π–ª: —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π, –Ω–∞–ø—Ä–∏–º–µ—Ä:

miniapp/src/hooks/useGeoLocation.ts

–†–µ–∞–ª–∏–∑—É–π:

export interface GeoCoords {
  lat: number;
  lng: number;
}

export interface UseGeoLocationResult {
  coords: GeoCoords | null;
  loading: boolean;
  error: string | null;
  requestLocation: () => void;
}

export function useGeoLocation(): UseGeoLocationResult {
  // —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
  // - —Ö—Ä–∞–Ω–∏—Ç coords, loading, error –≤ useState
  // - requestLocation:
  //   1) —Å–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ navigator.geolocation.getCurrentPosition
  //   2) –µ—Å–ª–∏ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Telegram.WebApp API (–µ—Å–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ —É–∂–µ –µ—Å—Ç—å –æ–±—ë—Ä—Ç–∫–∞)
}


–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–æ–≤–µ–¥–µ–Ω–∏—é:

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (–ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏) —Ö—É–∫ –ù–ï –æ–±—è–∑–∞–Ω —Å—Ä–∞–∑—É –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é ‚Äî –º—ã –±—É–¥–µ–º –≤—ã–∑—ã–≤–∞—Ç—å requestLocation() –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´üìç –†—è–¥–æ–º —Å–æ –º–Ω–æ–π¬ª.

requestLocation():

—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç loading=true,

–≤—ã–∑—ã–≤–∞–µ—Ç navigator.geolocation.getCurrentPosition,

–ø—Ä–∏ —É—Å–ø–µ—Ö–µ:

—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç coords: { lat, lng },

error=null,

loading=false.

–ø—Ä–∏ –æ—à–∏–±–∫–µ:

—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç error —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º,

loading=false.

–ï—Å–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ —É–∂–µ –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp –¥–ª—è –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –µ—ë –≤—Ç–æ—Ä—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –∏–ª–∏ –æ–±–µ—Ä–Ω–∏ –≤ —ç—Ç–æ—Ç —Ö—É–∫.

–ò—Å–ø–æ–ª—å–∑—É–π TypeScript, –Ω–µ –æ—Ç–∫–ª—é—á–∞–π —Å—Ç—Ä–æ–≥–∏–µ —Ä–µ–∂–∏–º—ã.

3.2. API-–∫–ª–∏–µ–Ω—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π (ads API)

–ù–∞–π–¥–∏ –º–æ–¥—É–ª—å API –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä:

miniapp/src/api/ads.ts

–ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞–π, –Ω–æ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

–†–∞—Å—à–∏—Ä—å/—Å–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–µ–æ–ø–æ–∏—Å–∫–∞:

export interface FetchAdsParams {
  categoryId?: string;
  subcategoryId?: string;
  cityId?: string;
  search?: string;
  sort?: 'date' | 'price_asc' | 'price_desc' | 'distance';
  radiusKm?: number;
  lat?: number;
  lng?: number;
}

export async function fetchAds(params: FetchAdsParams): Promise<Ad[]> {
  // –µ—Å–ª–∏ –µ—Å—Ç—å lat/lng –∏ radiusKm > 0 ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π /api/ads/nearby
  // –∏–Ω–∞—á–µ ‚Äî /api/ads/search —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–æ–π
}


–õ–æ–≥–∏–∫–∞:

–ï—Å–ª–∏ –∑–∞–¥–∞–Ω—ã lat, lng –∏ radiusKm > 0:

–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º GET-–∑–∞–ø—Ä–æ—Å –Ω–∞ /api/ads/nearby —Å —ç—Ç–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ + –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.

–ï—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ –∑–∞–¥–∞–Ω—ã:

–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–∏–π endpoint (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ /api/ads/search) —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.

–ù–µ –ª–æ–º–∞–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã:

–í—Å–µ –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏.

–ï—Å–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ —É–∂–µ –µ—Å—Ç—å fetchAds, –ø–æ—Å—Ç–∞—Ä–∞–π—Å—è —Ä–∞—Å—à–∏—Ä–∏—Ç—å –µ–≥–æ, –∞ –Ω–µ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å –Ω—É–ª—è.

=======================================
4. LCL-2 ‚Äî –ö–ù–û–ü–ö–ê ¬´üìç –†–Ø–î–û–ú –°–û –ú–ù–û–ô¬ª –ù–ê –ì–õ–ê–í–ù–û–ô

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å UX-—Ñ–∏—á—É.

–¶–µ–ª–∏:

–ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ MiniApp (–≥–¥–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π) –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫—Ä—É–ø–Ω–∞—è –∫–Ω–æ–ø–∫–∞ ¬´üìç –†—è–¥–æ–º —Å–æ –º–Ω–æ–π¬ª.

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏:

–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è requestLocation() –∏–∑ useGeoLocation(),

–ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:

–≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Ä–∞–¥–∏—É—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (3 –∫–º),

—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é (sort = 'distance'),

–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å lat/lng/radiusKm.

4.1. –ù–∞–π—Ç–∏ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

–ù–∞–π–¥–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –≥–¥–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è –ª–µ–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä:

miniapp/src/pages/HomePage.tsx

–∏–ª–∏ AdsPage.tsx, MainPage.tsx ‚Äî —Ä–∞–∑–±–µ—Ä–∏—Å—å –ø–æ –∫–æ–¥—É.

–≠—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω:

–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useGeoLocation():

const { coords, loading: geoLoading, error: geoError, requestLocation } = useGeoLocation();


—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

const [radiusKm, setRadiusKm] = useState<number>(3); // –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ä–∞–¥–∏—É—Å
const [sort, setSort] = useState<'date' | 'price_asc' | 'price_desc' | 'distance'>('distance');


–ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å:

lat: coords?.lat,

lng: coords?.lng,

radiusKm,

sort.

4.2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É ¬´üìç –†—è–¥–æ–º —Å–æ –º–Ω–æ–π¬ª

–ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–Ω–∞–¥ —Å–ø–∏—Å–∫–æ–º –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏–ª–∏ –≤ —à–∞–ø–∫–µ) –¥–æ–±–∞–≤—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–Ω–æ–ø–∫–∏:

–¢–æ–ª—å–∫–æ UI-–ª–æ–≥–∏–∫–∞, —Å—Ç–∏–ª–∏ ‚Äî –≤ —Å—Ç–∏–ª–µ –ø—Ä–æ–µ–∫—Ç–∞.

–¢–µ–∫—Å—Ç:

üìç –†—è–¥–æ–º —Å–æ –º–Ω–æ–π

–ü–æ–≤–µ–¥–µ–Ω–∏–µ:

–ü—Ä–∏ –∫–ª–∏–∫–µ:

–≤—ã–∑–≤–∞—Ç—å requestLocation().

–ù–ï –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ä–∞–∑—É –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é, –µ—Å–ª–∏ –ª–æ–≥–∏–∫–∞ —É–∂–µ –∑–∞–≤—è–∑–∞–Ω–∞ –Ω–∞ useEffect –ø–æ coords/radiusKm ‚Äî –¥–µ–π—Å—Ç–≤—É–π –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ–∫—É—â–µ–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞.

–ö–æ–≥–¥–∞ coords –∏–∑–º–µ–Ω—è—Ç—Å—è (—Å—Ç–∞–Ω—É—Ç –Ω–µ null), –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω:

–≤—ã–∑–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (—á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π useEffect –∏–ª–∏ –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ, —Å–ª–µ–¥—É—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞).

4.3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏

–ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω—É–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å:

geoLoading === true:

–º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π —Ç–µ–∫—Å—Ç ¬´–û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∞—à—É –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é‚Ä¶¬ª –∏–ª–∏ —Å–ø–∏–Ω–Ω–µ—Ä.

geoError !== null:

–ø–æ–∫–∞–∑–∞—Ç—å –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:

¬´–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–∞—à—É –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é¬ª,

–ø–ª—é—Å —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏—é).

–ø—Ä–∏ —ç—Ç–æ–º —Å–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω (fallback: –æ–±—ã—á–Ω–∞—è –ª–µ–Ω—Ç–∞ –±–µ–∑ –≥–µ–æ).

=======================================
5. LCL-1 (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ) ‚Äî –§–ò–õ–¨–¢–† –ü–û –†–ê–î–ò–£–°–£

–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä —Ä–∞–¥–∏—É—Å–∞ –ø–æ–∏—Å–∫–∞ –≤ UI.

–¶–µ–ª—å:

–í –ø–∞–Ω–µ–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (FilterPanel) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ä–∞–¥–∏—É—Å: 300 –º, 1 –∫–º, 3 –∫–º, 5 –∫–º, 10 –∫–º.

–ü—Ä–∏ —Å–º–µ–Ω–µ —Ä–∞–¥–∏—É—Å–∞ ‚Äî –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å –ª–µ–Ω—Ç—É.

5.1. RadiusFilter –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

–ù–∞–π–¥–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä:

miniapp/src/components/FilterPanel.tsx

–°–¥–µ–ª–∞–π –∏–ª–∏ –¥–æ–±–∞–≤—å –≤–ª–æ–∂–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä:

RadiusFilter (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –≤ components/filters).

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

interface RadiusFilterProps {
  value: number; // —Ç–µ–∫—É—â–∏–π —Ä–∞–¥–∏—É—Å –≤ –ö–ò–õ–û–ú–ï–¢–†–ê–•
  onChange: (radiusKm: number) => void;
}


–ü—Ä–µ—Å–µ—Ç—ã —Ä–∞–¥–∏—É—Å–æ–≤ (–≤ –∫–º):

0.3 (300 –º),

1,

3,

5,

UI:

–†—è–¥ "—á–∏–ø–æ–≤" / –∫–Ω–æ–ø–æ–∫.

–ê–∫—Ç–∏–≤–Ω—ã–π —Ä–∞–¥–∏—É—Å ‚Äî –≤–∏–∑—É–∞–ª—å–Ω–æ –≤—ã–¥–µ–ª–µ–Ω.

–ü—Ä–∏–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞:

–¥–ª—è 0.3 ‚Äî 300 –º,

–¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö ‚Äî 1 –∫–º, 3 –∫–º, 5 –∫–º, 10 –∫–º.

5.2. –°–≤—è–∑–∞—Ç—å RadiusFilter —Å –≥–ª–∞–≤–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

–í HomePage:

—É–∂–µ –µ—Å—Ç—å radiusKm –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

–ø–µ—Ä–µ–¥–∞–π –≤ FilterPanel:

radiusKm={radiusKm},

onRadiusChange={setRadiusKm}.

–í–Ω—É—Ç—Ä–∏ FilterPanel –ø—Ä–æ–±—Ä–æ—Å—å —ç—Ç–æ –≤ RadiusFilter.

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ radiusKm:

–µ—Å–ª–∏ –µ—Å—Ç—å coords:

–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–π –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å –Ω–æ–≤—ã–º —Ä–∞–¥–∏—É—Å–æ–º.

–µ—Å–ª–∏ coords == null:

–º–æ–∂–Ω–æ:

–ª–∏–±–æ –ø—ã—Ç–∞—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –µ—Å—Ç—å (backend –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç),

–ª–∏–±–æ –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞–∂–∞—Ç—å ¬´üìç –†—è–¥–æ–º —Å–æ –º–Ω–æ–π¬ª.

–°–æ–±–ª—é–¥–∞–π —Ç–µ–∫—É—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É ‚Äî –µ—Å–ª–∏ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å onFiltersChange –∏–ª–∏ –æ–±—â–∏–π –æ–±—ä–µ–∫—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π —Ä–∞–¥–∏—É—Å —Ç—É–¥–∞.

=======================================
6. LCL-3 ‚Äî –í–´–í–û–î –†–ê–°–°–¢–û–Ø–ù–ò–Ø –í –ö–ê–†–¢–û–ß–ö–ï –û–ë–™–Ø–í–õ–ï–ù–ò–Ø

–°–µ–π—á–∞—Å backend –ø—Ä–∏ –≥–µ–æ–ø–æ–∏—Å–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –ø–æ–ª–µ distanceKm (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

–ù–∞–¥–æ:

–∞–∫–∫—É—Ä–∞—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ AdCard.

–∫—Ä–∞—Å–∏–≤–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ.

–Ω–µ –ª–æ–º–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É, –µ—Å–ª–∏ distanceKm –Ω–µ—Ç.

6.1. Helper formatDistance()

–°–æ–∑–¥–∞–π helper-—Ñ—É–Ω–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ miniapp/src/utils/formatDistance.ts –∏–ª–∏ —Ä—è–¥–æ–º —Å AdCard):

export function formatDistance(distanceKm?: number): string | null {
  if (distanceKm == null || isNaN(distanceKm)) return null;

  if (distanceKm < 1) {
    const meters = Math.round(distanceKm * 1000);
    return `üìç ${meters} –º –æ—Ç –≤–∞—Å`;
  }

  const value = Number(distanceKm.toFixed(1));
  return `üìç ${value} –∫–º –æ—Ç –≤–∞—Å`;
}

6.2. –ò–∑–º–µ–Ω–∏—Ç—å AdCard

–ù–∞–π–¥–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:

miniapp/src/components/AdCard.tsx

–î–æ–±–∞–≤—å:

–∏–º–ø–æ—Ä—Ç formatDistance,

–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ:

const distanceLabel = formatDistance(ad.distanceKm);


–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ JSX:

{distanceLabel && (
  <div className="ad-card__distance">
    {distanceLabel}
  </div>
)}


–†–∞—Å–ø–æ–ª–æ–∂–∏ –±–ª–æ–∫ —Å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ–º –ª–æ–≥–∏—á–Ω–æ:

–ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º,

–ª–∏–±–æ —Ä—è–¥–æ–º —Å —Ü–µ–Ω–æ–π,

–ª–∏–±–æ –≤ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ ‚Äî –Ω–æ —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ –Ω–∞—Ä—É—à–∞—Ç—å —Ç–µ–∫—É—â–∏–π –¥–∏–∑–∞–π–Ω.

–°—Ç–∏–ª–∏:

–∏—Å–ø–æ–ª—å–∑—É–π –ø–æ–¥—Ö–æ–¥, –ø—Ä–∏–Ω—è—Ç—ã–π –≤ –ø—Ä–æ–µ–∫—Ç–µ (CSS/Tailwind/Emotion –∏ —Ç.–ø.).

–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ —Å–≤–µ—Ç–ª—ã–π —Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Ç—è–≥–∏–≤–∞–ª –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–µ–±—è.

=======================================
7. –û–ß–ò–°–¢–ö–ê –ò –ü–†–û–í–ï–†–ö–ò

–í –∫–æ–Ω—Ü–µ:

–£–±–µ–¥–∏—Å—å, —á—Ç–æ MiniApp:

–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏,

–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏:

–µ—Å—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è,

–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑–∞–ª –≤ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏,

–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.

–ü—Ä–æ–≤–µ—Ä—å —Å—Ü–µ–Ω–∞—Ä–∏–∏:

–æ—Ç–∫—Ä—ã—Ç—å MiniApp, –Ω–∞–∂–∞—Ç—å ¬´üìç –†—è–¥–æ–º —Å–æ –º–Ω–æ–π¬ª ‚Üí –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ä—è–¥–æ–º,

–ø–æ–º–µ–Ω—è—Ç—å —Ä–∞–¥–∏—É—Å ‚Üí —Å–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è,

–æ—Ç–∫–ª—é—á–∏—Ç—å –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Üí UI –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ–±—ã—á–Ω–∞—è –ª–µ–Ω—Ç–∞.

–ü—Ä–æ–π–¥–∏—Å—å –ø–æ —Ç–∏–ø–∞–º TypeScript:

–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å any –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏,

–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ts-–æ—à–∏–±–æ–∫.

–í –∫–æ–Ω—Ü–µ –≤—ã–≤–µ–¥–∏ –∫—Ä–∞—Ç–∫–∏–π —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ —á—Ç–æ –≤ –Ω–∏—Ö —Å–¥–µ–ª–∞–Ω–æ (bullet list), —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, –∫—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏ —Ä–µ–≤—å—é.

–°–û–•–†–ê–ù–Ø–ô —Ç–µ–∫—É—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∞, –Ω–µ –≤—ã–¥—É–º—ã–≤–∞–π –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –Ω—É–ª—è.