ПРОМТ ДЛЯ REPLIT: ПОЧИНИТЬ СКРОЛЛ И БЛОК “РЯДОМ С ВАМИ” НА ГЛАВНОЙ

Ты — senior React-разработчик.
Нужно доделать и починить главный экран MiniApp KETMAR, чтобы:

корректно работал скролл,

при скролле вверх/вниз после блока категорий появлялся список ближайших объявлений “Рядом с вами”,

строка поиска оставалась всегда доступной и кликабельной (sticky).

Сейчас это не работает: скролл на главной не показывает ленту ближайших объявлений так, как задумано.

1. Найди главный экран и структуру

Найди компоненты, которые отвечают за главную страницу MiniApp, например:

HomeScreen, HomePage, MainScreen, MainPage или аналог,

внутри — блоки:

шапка (KETMAR),

строка поиска,

сетка быстрых категорий,

(возможно) секция “Рядом с вами” / NearbyAds.

Твоя задача — сделать один вертикально скроллируемый экран, где:

Сверху:

шапка,

строка поиска.

Ниже:

“Быстрые категории”.

Ещё ниже:

блок “Рядом с вами” (список ближайших объявлений).

2. Скролл: почему сейчас не работает и как исправить

Проверь:

Вёрстку корневого контейнера главного экрана:

не должен быть overflow: hidden там, где нужно overflow-y: auto / scroll;

высота контейнера должна быть 100vh / 100% и позволять внутреннему контенту скроллиться;

не должно быть вложенных конфликтующих scroll-контейнеров (например, и <body>, и внутренний div со своим скроллом, из-за чего фактический контент не двигается).

Использование Telegram WebApp:

если стоит Telegram.WebApp.expand() / enableClosingConfirmation — проверь, не ломается ли высота окна;

убедись, что основной скролл — на корневом контейнере MiniApp, а не заблокирован стилями.

Логика отрисовки “Рядом с вами”:

список ближайших объявлений должен быть частью того же скроллируемого контейнера, а не отдельной страницы или фиксированного блока;

он не должен быть position: absolute поверх всего экрана без учёта размеров родителя.

Исправление:

Сделай одну вертикальную колонку, что-то вроде:

return (
  <div className="app-root">
    <header>...шапка + поиск...</header>

    <div className="scroll-container">
      <section>...быстрые категории...</section>
      <section>...блок "Рядом с вами" со списком объявлений...</section>
    </div>
  </div>
);


Где:

.app-root — высота 100vh,

.scroll-container — overflow-y: auto; height: calc(100vh - высота шапки);

Либо используй flex-верстку: шапка фикс, ниже — flex-элемент, который скроллится.

3. Поведение при скролле

Нужное поведение:

При первом открытии:

пользователь видит шапку, поиск и быстрые категории,

блок “Рядом с вами” уже существует ниже, но его не видно до скролла.

Когда пользователь тянет контент вверх (скроллит вниз):

быстрые категории уходят вверх,

появляется блок “Рядом с вами” и список карточек.

Строка поиска должна остаться сверху (sticky).

Сделай так:

Строку поиска вынеси в отдельный компонент SearchBar.

Задай ему position: sticky; top: 0; z-index: ... внутри скролл-контейнера, чтобы:

при скролле весь контент под ним ехал вверх,

но сама строка поиска была всегда доступна и кликабельна.

Проверь, что sticky работает именно внутри контейнера, который скроллится.

4. Блок “Рядом с вами”

Блок “Рядом с вами” должен:

быть частью главного экрана (не отдельным роутом),

находиться ниже блока категорий,

содержать:

заголовок Рядом с вами,

подзаголовок В радиусе X км (X — текущий выбранный радиус),

кнопку Карта (можно пока сделать переход на существующий экран карты или заглушку),

список карточек объявлений.

Важное требование:
НЕ ждать “scroll событие”, чтобы начать загружать объявления.
Загрузка ближайших объявлений может начинаться сразу при рендере главной (после получения гео),
а скролл просто открывает доступ к этому блоку визуально.

5. Загрузка ближайших объявлений

Если ранее уже делалась логика “динамического радиуса” — используй её.

Минимальные требования:

При входе на главную:

запросить геолокацию пользователя (через уже существующий механизм),

сделать запрос к backend, например:
GET /api/ads/nearby?lat=...&lng=...&radiusKm=3 (радиус по умолчанию 3 км),

сохранить результат в nearbyAds.

Отрисовать блок “Рядом с вами” внизу главной:

<section>
  <h2>Рядом с вами</h2>
  <p>В радиусе {radiusKm} км</p>
  <button>Карта</button>
  <div className="nearby-list">
    {nearbyAds.map(ad => <AdCard ... />)}
  </div>
</section>


Если nearbyAds пустой:

показать текст Рядом с вами пока нет объявлений. Попробуйте позже или измените категорию.

но блок должен всё равно быть виден при скролле.

6. Проверка и отладка

После изменений:

Запусти MiniApp локально.

Открой главную страницу в браузере в мобильной ширине.

Проверь:

можно ли скроллить вниз после категорий;

появляется ли блок “Рядом с вами”;

корректно ли работает sticky поиска (поиск всегда сверху в зоне видимости);

кликается ли поиск (не перекрыт блоками).

Проверь на реальном устройстве/эмуляторе (Telegram):

нет ли конфликтов с нативным скроллом Telegram WebView,

не заблокирован ли скролл стилями overflow: hidden где-нибудь на body/html.

Если пришлось менять стили html, body или корневого div — приведи их к стандартному варианту SPA-приложения:

html, body, #root { height: 100%; margin: 0; padding: 0; }

7. Итог, который нужен

В результате:

Главная страница нормально скроллится.

После блока категорий при скролле вниз видно список ближайших объявлений.

Строка поиска:

всегда на виду,

всегда кликабельна,

не прокручивается вверх за пределы экрана.

Блок “Рядом с вами” не спрятан на другой странице и не перекрывается фиксированными контейнерами.

Сделай правки максимально аккуратно, не ломая другие экраны MiniApp, и оставь минимальные понятные комментарии в ключевых местах, где правишь скролл/верстку.

Этого Replit’у хватит, чтобы целенаправленно ковырять скролл и ленту “Рядом с вами”.