PROMPT ДЛЯ REPLIT / CODEX

Тема: Клавиатура не должна поднимать нижнюю навигацию (во всех экранах мини-апа)

Ты — Senior Frontend-разработчик (React / React + Telegram WebApp).
Нужно исправить поведение мини-приложения: когда открывается экранная клавиатура, нижняя навигация (Главная / Лента / Мои / Избранное / Профиль и т.п.) не должна “подскакивать” вверх, а должна считаться жёстко зафиксированной частью мини-апа.

Сейчас проблема такая (нужно воспроизвести и исправить):

На экране кабинет продавца → вкладка “Подача/Быстрая подача” в форме “Название товара / Цена / Единица”:

когда фокус попадает в поле ввода и появляется клавиатура,

нижняя панель навигации поднимается вверх вместе с контентом,

выглядит так, как будто навигация “уезжает” вверх вслед за формой.

Аналогично ведут себя другие экраны, где есть поля ввода.

Нужно сделать так, чтобы:

Нижняя навигация всегда была жёстко зафиксирована внизу мини-апа,
независимо от того, открыта клавиатура или нет.

При появлении клавиатуры:

скролл должен происходить только внутри контентной области,

нижняя навигация НЕ должна всплывать вверх и занимать место над клавиатурой,

допустимо, если клавиатура перекрывает нижнюю навигацию — главное, чтобы она не “прыгала”.

Это поведение должно работать во всём приложении, а не только в одном экране:

Кабинет продавца (все вкладки).

Мои объявления.

Избранное.

Профиль.

Фермерский рынок / группы товаров.

Все остальные экраны с нижними табами.

1. Общая архитектура layout’а

Используй единый layout с тремя зонами:

Header — фиксированная верхняя часть (заголовок, вкладки, фильтры).

Content — единственная область, которая скроллится.

BottomNav — фиксированная нижняя навигация.

Псевдоструктура:

export const AppScreenLayout = ({ header, children }: { header: ReactNode; children: ReactNode }) => {
  return (
    <div className="app-screen-root">
      <header className="app-screen-header">
        {header}
      </header>

      <main className="app-screen-content">
        {children}
      </main>

      <footer className="app-screen-bottom-nav">
        <BottomTabs /> {/* глобальная нижняя навигация */}
      </footer>
    </div>
  );
};


Стили (адаптируй под текущий стек стилей, главное — логика):

.app-screen-root {
  display: flex;
  flex-direction: column;
  height: 100vh;         /* или высота по Telegram.WebApp.viewportHeight */
  overflow: hidden;      /* никаких скроллов у корня */
}

.app-screen-header {
  flex: 0 0 auto;
}

.app-screen-bottom-nav {
  flex: 0 0 auto;
  /* НЕ зависящая от клавиатуры высота */
}

.app-screen-content {
  flex: 1 1 auto;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}


Ключевая идея: BottomTabs не входят в скроллируемую область, и их позиция не должна пересчитываться из-за изменения высоты окна при появлении клавиатуры.

2. Работа с клавиатурой / viewport внутри Telegram WebApp

В Telegram WebApp на мобильных устройствах при появлении клавиатуры меняется window.innerHeight, что может ломать flex-layout и “поднимать” нижнюю навигацию. Нужно:

Запретить скролл body на всём приложении:

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;   /* чтобы не было скролла всей страницы и сворачивания WebApp */
}


Корневой контейнер React-приложения (#root / <AppRoot /> и т.п.) привести к 100% высоты:

#root {
  height: 100%;
}


Для высоты экранов использовать либо:

height: 100vh, либо (лучше для Telegram):

привязку к Telegram.WebApp.viewportHeight:

при инициализации приложения:

вызвать Telegram.WebApp.ready() и Telegram.WebApp.expand();

считать Telegram.WebApp.viewportHeight и, если в проекте есть глобальный контекст/хук, использовать это значение, чтобы задавать высоту основного контейнера.

при событии viewportChanged (если используется) не менять логику позиции BottomTabs, только при необходимости подстраивать высоту контентной области.

Главное: не привязывать высоту нижней навигации к изменяющемуся innerHeight/viewportHeight при появлении клавиатуры.

3. Проверить и поправить конкретные экраны

Пройдись по всем экранам, где есть нижняя навигация:

SellerCabinetScreen (Кабинет продавца, все вкладки: Товары, Подача/Создать товар, Статистика, Спрос, PRO, Ярмарки).

MyAdsScreen (Мои объявления).

FavoritesScreen (Избранное).

ProfileScreen (Профиль).

FarmerMarketScreen / CategoryScreen (фермерский рынок / группы товаров).

Для каждого:

Оберни компонент в общий AppScreenLayout (или аналогичный общий layout).

Убедись, что:

BottomTabs не находится внутри скроллируемого контейнера.

нет дополнительных position: sticky/fixed стилей, которые заставляют навигацию прыгать при изменении высоты окна.

4. Тесты после правок

Для каждого экрана:

Открыть на смартфоне/эмуляторе внутри Telegram WebApp.

Нажать на любое текстовое поле (например, “Название товара” в “Быстрой подаче”).

Убедиться, что:

появляется клавиатура,

нижняя навигация остаётся на месте (внизу мини-апа),

контент (форма/список) можно скроллить внутри центральной области,

сам WebApp не сворачивается, страница браузера не “прыгает”.

Если клавиатура перекрывает нижнюю навигацию — это допустимо.
Недопустимо, чтобы нижняя навигация подскакивала вверх вместе с формой.

Сделай всё описанное выше:
перепроверь все экраны мини-апа с нижней навигацией и зафиксируй поведение так, чтобы при появлении клавиатуры нижняя панель оставалась частью мини-апа и не двигалась, а скролл происходил только внутри контентной области.