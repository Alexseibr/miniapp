MINI-PROMPT: distanceKm + –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Ä–∞–¥–∏—É—Å—É
–¢—ã ‚Äî frontend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (React + TS) –≤ –ø—Ä–æ–µ–∫—Ç–µ LOCALHUB / KETMAR.

–ù—É–∂–Ω–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
1) —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è `distanceKm` –≤ UI,
2) –ø–æ–Ω—è—Ç–Ω—ã–µ UX-–ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Ä–∞–¥–∏—É—Å—É, –∫–æ–≥–¥–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –º–∞–ª–æ –∏–ª–∏ –Ω–µ—Ç.

–°–î–ï–õ–ê–ô –¢–û–õ–¨–ö–û –≠–¢–£ –ß–ê–°–¢–¨, –ù–ò–ß–ï–ì–û –õ–ò–®–ù–ï–ì–û –ù–ï –õ–û–ú–ê–ô.

=================================
1. –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï distanceKm
=================================

–ö–æ–Ω—Ç–µ–∫—Å—Ç:

- backend –æ—Ç–¥–∞—ë—Ç –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö –ø–æ–ª–µ `distanceKm: number` ‚Äî —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ –ö–ò–õ–û–ú–ï–¢–†–ê–•.
- –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ —É –Ω–∞—Å –µ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `AdCard`).
- –í –∫–∞—Ä—Ç–æ—á–∫–µ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ —á–µ–ª–æ–≤–µ–∫–æ-–ø–æ–Ω—è—Ç–Ω–æ–º –≤–∏–¥–µ.

–ù—É–∂–Ω–æ:

1) –°–æ–∑–¥–∞—Ç—å helper-—Ñ—É–Ω–∫—Ü–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   - `miniapp/src/utils/formatDistance.ts`
   - –∏–ª–∏ —Ä—è–¥–æ–º —Å `AdCard`, –µ—Å–ª–∏ —Ç–∞–∫ –ø—Ä–∏–Ω—è—Ç–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ.

–°–∏–≥–Ω–∞—Ç—É—Ä–∞:

```ts
export function formatDistance(distanceKm?: number | null): string | null


–ü—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

–ï—Å–ª–∏ distanceKm == null –∏–ª–∏ NaN ‚Üí –≤–µ—Ä–Ω—É—Ç—å null (–Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å).

–ï—Å–ª–∏ distanceKm < 1:

–ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ –º–µ—Ç—Ä—ã: meters = Math.round(distanceKm * 1000),

–≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É –≤–∏–¥–∞: "üìç ${meters} –º –æ—Ç –≤–∞—Å".

–ï—Å–ª–∏ distanceKm >= 1:

–æ–∫—Ä—É–≥–ª–∏—Ç—å –¥–æ 1 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π:

value = Number(distanceKm.toFixed(1));

–≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É –≤–∏–¥–∞: "üìç ${value} –∫–º –æ—Ç –≤–∞—Å".

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ AdCard:

–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å helper formatDistance,

–≤—ã—á–∏—Å–ª–∏—Ç—å:

const distanceLabel = formatDistance(ad.distanceKm);


–≤—ã–≤–µ—Å—Ç–∏ –≤ JSX —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ null, –Ω–∞–ø—Ä–∏–º–µ—Ä:

{distanceLabel && (
  <div className="ad-card__distance">
    {distanceLabel}
  </div>
)}


–°—Ç–∏–ª–∏:

—Å–¥–µ–ª–∞—Ç—å —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–º–µ—Ç–Ω—ã–º, –Ω–æ –Ω–µ –±–æ–ª–µ–µ —è—Ä–∫–∏–º, —á–µ–º —Ü–µ–Ω–∞:

–º–æ–∂–Ω–æ –º–µ–Ω—å—à–∏–º —Ä–∞–∑–º–µ—Ä–æ–º,

–±–æ–ª–µ–µ –º—è–≥–∫–∏–º —Ü–≤–µ—Ç–æ–º (secondary).

=================================
2. UX-–ü–û–î–°–ö–ê–ó–ö–ò –ü–û –†–ê–î–ò–£–°–£

–ö–æ–Ω—Ç–µ–∫—Å—Ç:

–ù–∞ —ç–∫—Ä–∞–Ω–∞—Ö "–ì–ª–∞–≤–Ω–∞—è" –∏ "–õ–µ–Ω—Ç–∞" —É –Ω–∞—Å –µ—Å—Ç—å:

—Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ radiusKm,

—Å–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π ads: Ad[],

–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (coords) —á–µ—Ä–µ–∑ useGeoLocation().

–ù—É–∂–Ω–æ:

–°–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∑–∞–≤—è–∑–∞–Ω–Ω—ã–µ –Ω–∞:

radiusKm,

–∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π.

–í–∞—Ä–∏–∞–Ω—Ç—ã:

–ö–æ–≥–¥–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ù–ï–¢ (ads.length === 0), –Ω–æ –µ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:

–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫—Ä—É–ø–Ω–æ (–Ω–∞–¥ —Å–ø–∏—Å–∫–æ–º/–≤–º–µ—Å—Ç–æ —Å–ø–∏—Å–∫–∞):

–∑–∞–≥–æ–ª–æ–≤–æ–∫:

"–í —Ä–∞–¥–∏—É—Å–µ ${radiusKm} –∫–º –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ."

–ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫:

"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞."

–∫—Ä—É–ø–Ω–∞—è –∫–Ω–æ–ø–∫–∞:

"–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–¥–∏—É—Å"

–õ–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–∫–∏:

—É–≤–µ–ª–∏—á–∏—Ç—å radiusKm –Ω–∞ —à–∞–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, +5 –∫–º –∏–ª–∏ –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –±–æ–ª—å—à–µ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞),

–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π.

–ö–æ–≥–¥–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ú–ê–õ–û (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1‚Äì3 —à—Ç—É–∫–∏):

–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–π –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤—ã–π –±–ª–æ–∫ –Ω–∞–¥/–ø–æ–¥ —Å–ø–∏—Å–∫–æ–º:

–¢–µ–∫—Å—Ç:

"–ù–∞—à–ª–∏ –º–∞–ª–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ —Ä–∞–¥–∏—É—Å–µ ${radiusKm} –∫–º."

"–ú–æ–∂–µ—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–¥–∏—É—Å, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –±–æ–ª—å—à–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤."

–ë–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π –∫–Ω–æ–ø–∫–∏ ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–º—ë–∫–∞, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–∞–ª–µ–Ω—å–∫—É—é —Å—Å—ã–ª–∫—É:

"–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–¥–∏—É—Å –Ω–∞ 5 –∫–º" ‚Üí radiusKm = radiusKm + 5.

–¢–µ–∫—Å—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞ —Ä—è–¥–æ–º —Å –∫–æ–Ω—Ç—Ä–æ–ª–æ–º:

–ö–æ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–∞–¥–∏—É—Å –≤ UI (–ø–æ–¥ —Å–ª–∞–π–¥–µ—Ä–æ–º/–∫–Ω–æ–ø–∫–∞–º–∏ –ø—Ä–µ—Å–µ—Ç–æ–≤), –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—è—Å–Ω–µ–Ω–∏–µ:

–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç: "–†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞: ${radiusKm} –∫–º"

–ú–∞–ª–µ–Ω—å–∫–∞—è –ø–æ–¥–ø–∏—Å—å:

"–ß–µ–º –±–æ–ª—å—à–µ —Ä–∞–¥–∏—É—Å, —Ç–µ–º –±–æ–ª—å—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π."

–í–∞–∂–Ω–æ:

–§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–º–∏, –±–µ–∑ —Ç–µ—Ö.—Ç–µ—Ä–º–∏–Ω–æ–≤.

–ù–∏–∫–∞–∫–∏—Ö "—Ñ–∏–ª—å—Ç—Ä–æ–≤", "–∫–≤–∞–Ω—Ç–∏–ª–µ–π", "–ø–æ –≥–µ–æ–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º" –∏ —Ç.–ø. üôÇ

=================================
3. –ß–¢–û –°–î–ï–õ–ê–¢–¨ –í –ö–û–î–ï

–î–æ–±–∞–≤–∏—Ç—å formatDistance –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –µ–≥–æ –≤ AdCard.

–ù–∞ —ç–∫—Ä–∞–Ω–∞—Ö, –≥–¥–µ –µ—Å—Ç—å radiusKm –∏ ads (–ì–ª–∞–≤–Ω–∞—è/–õ–µ–Ω—Ç–∞):

–¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫-–ø–æ–¥—Å–∫–∞–∑–∫—É –¥–ª—è:

ads.length === 0,

ads.length > 0 && ads.length <= 3.

—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–¥–∏—É—Å" —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è radiusKm –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π –æ–±—ä—è–≤–ª–µ–Ω–∏–π.

–í –∫–æ–Ω—Ü–µ ‚Äî –Ω–µ –∑–∞–±—É–¥—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ TypeScript –Ω–µ —Ä—É–≥–∞–µ—Ç—Å—è, –∏ –ø–æ–º–æ—á—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–ª—è distanceKm, radiusKm, ads.

–ù–∏—á–µ–≥–æ –¥—Ä—É–≥–æ–≥–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ –Ω–µ —Ç—Ä–æ–≥–∞–π.