PROMPT ДЛЯ CODEX (безопасный, аккуратный, ничего не ломающий)
Задача: унифицировать “Фермерский кабинет / Мой магазин / Блогер / Ремесленник”, ничего не ломая.

Ты — Senior Fullstack разработчик KETMAR Market.
Проект в прод-версии, ничего нельзя ломать, менять текущие API-структуры, id-полей или базовые сущности.
Разрешены только переименования, UI-замены, неразрушающие новые поля и логическое объединение кабинетов в один “Мой магазин”.

Нужно выполнить:

1. Переименовать весь “Фермерский кабинет” → “Мой магазин”
В мини-апе:

Все кнопки, заголовки, вкладки, хедеры:
“Фермерский кабинет” → “Мой магазин”

Иконку заменить на новую (пусть временно любая, placeholder — корзина/магазин), без ломки навигации.

В админ-панели:

Точно так же переименовать:
“Фермерский кабинет” → “Мой магазин”

2. Полностью убрать старый модуль “Мой магазин” (тот, который дублируется)

Удалить только UI-пункты, но:

⚠️ НЕ удалять таблицы, коллекции и API, чтобы не сломать существующих пользователей.

Просто убрать/скрыть пункты меню в мини-апе и админке.

Все заявки, которые раньше шли в “Мой магазин”, теперь должны идти в новый кабинет (см. пункт 4).

3. В админ-панели заменить:

“Управление фермерами” → “Управление магазинами”

Полностью скрыть:

“Управление продавцами”

Старое “Мой магазин / заявки”

Админ-панель должна показывать только:

заявки магазинов/блогеров/фермеров/ремесленников (единая таблица)

карточку магазина

статистику продаж

роли и статусы.

4. Создать единый тип кабинета — “Мой магазин”

Когда пользователь нажимает “Мой магазин”:

Если он не зарегистрирован как владелец, открывается простая форма-мастер:

Тип продавца:

Магазин

Фермер

Блогер / Инстаграм-продавец

Ремесленник

Сохраняем роль в новом поле:

shopProfile.role: "SHOP" | "FARMER" | "BLOGGER" | "ARTISAN"


⚠️ Не менять user.role, чтобы не ломать авторизацию и доступы.
Добавляем только новый безопасный под-профиль.

5. Внутри “Мой магазин” UI должен адаптироваться под роль
Если роль = “SHOP” (магазин):

Показать вкладки:

Мой магазин

Мои товары

Статистика по его категории

Статистика: цены, спрос, сезонность, рекомендации по upsell.

Если роль = “BLOGGER” (Инстаграм-продавец):

Те же вкладки, но аналитика упрощённая:

популярность товаров в радиусе 30 км,

какая выпечка/одежда/детские товары лучше продаются,

средние цены,

советы “добавить X, потому что спрос растёт”.

Если роль = “FARMER”:

Добавить сверху ярлык “Фермерский аккаунт”

Вкладки:

Мой магазин

Продукция

Аналитика фермерского рынка
→ по ягодам, мясу, овощам — только по его группе товаров

Статистика по радиусу 30 км:

цены по ягодам,

спрос конкретно на его вид продукции,

рекомендации: “в городе N повышен спрос на малину”.

Если роль = “ARTISAN” (ремесленник):

Вкладки:

Мой магазин

Изделия

Аналитика ремесленного рынка

Подбор товаров по его нише:

что продаётся лучше,

цены,

тренды (дерево, эпоксидка, украшения),

рекомендации по кросс-продажам.

6. Новая логика статистики (не ломая старую)
Безопасно:

Добавить новый документ AnalyticsProfile, связанный с shopProfile.

Кэшировать статистику, вычислять на backend через безопасный /stats/... роут.

Ничего не менять в существующих коллекциях.

7. Основной принцип: ничего не сломать

Принципы разработки:

Не менять структуру существующих таблиц.

Не удалять поля.

Новая логика — через новые поля, новые UI-экраны, флаги и безопасные переключатели.

Существующие API не менять.

Новые эндпоинты:

/shop/profile

/shop/profile/update

/shop/stats

/shop/stats/category/:id

8. UI-переименования

Мини-апп:

Везде, где “Фермерский кабинет” → “Мой магазин”

Картинка: заменить на нейтральную (магазин/витрина).

Верхний хедер:

Если роль = FARMER → текст под заголовком: “Фермерский аккаунт”

В остальных случаях → просто “Мой магазин”.

9. Заявки магазинов (единая форма)

Форма регистрации должна быть единой:

название

тип продавца (4 варианта)

категория товаров (можно несколько)

краткое описание

гео-точка

Все заявки идут в:
admin → Управление магазинами

**Сделай всё максимально аккуратно:

только переименования, UI-замены и добавление новых лёгких полей.
Текущие сервисы, авторизацию, личные данные, и модель объявлений — НЕ трогать.**

Никаких массовых миграций.
Ничего не ломаем.
Только расширяем и переименовываем.

Готово — выполни вышеописанное.