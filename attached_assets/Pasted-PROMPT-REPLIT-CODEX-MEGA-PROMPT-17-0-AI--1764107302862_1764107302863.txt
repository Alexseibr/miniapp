PROMPT –î–õ–Ø REPLIT / CODEX

–ó–∞–¥–∞—á–∞:
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å  
üî• MEGA-PROMPT 17.0 ‚Äî ¬´AI-–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ù–ê –ì–õ–ê–í–ù–û–ô¬ª  
= TikTok-–ø–æ–¥–æ–±–Ω–∞—è –ª–µ–Ω—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ (infinite scroll + –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è).

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ:

- –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è,
- –µ–≥–æ –ø–æ–∏—Å–∫–æ–≤,
- –µ–≥–æ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤,
- –µ–≥–æ –ª–∞–π–∫–æ–≤ / –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ,
- –µ–≥–æ Digital Twin (MEGA 14),
- –≥–µ–æ-–ø–æ–∑–∏—Ü–∏–∏,
- –∫–∞—Ç–µ–≥–æ—Ä–∏–π,
- —Ü–µ–Ω,
- —Ç—Ä–µ–Ω–¥–æ–≤ –≤ —Ä–∞–π–æ–Ω–µ,
- —Å–µ–∑–æ–Ω–Ω—ã—Ö –≤—Å–ø–ª–µ—Å–∫–æ–≤,
- —Ñ–µ—Ä–º–µ—Ä—Å–∫–æ–≥–æ —Å–ø—Ä–æ—Å–∞,
- –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

====================================================================
0. –ö–û–ù–¶–ï–ü–¢: –õ–ò–ß–ù–ê–Ø –õ–ï–ù–¢–ê –ö–ê–ö TIKTOK
====================================================================

–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚Üí –ù–ï –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Üí  
–∞ **—É–º–Ω–∞—è –ª–µ–Ω—Ç–∞**, –≥–¥–µ –∞–ª–≥–æ—Ä–∏—Ç–º —Å–∞–º —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å.

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
- –∞–ª–≥–æ—Ä–∏—Ç–º –Ω–∞—á–∏–Ω–∞–µ—Ç —Å –æ–±—â–µ–≥–æ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä—è–¥–æ–º),
- –∑–∞—Ç–µ–º –æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è,
- —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–≤–µ—Ä—Ö—Ç–æ—á–Ω—ã–º.

–ê–ª–≥–æ—Ä–∏—Ç–º Weighted Hybrid:
1) Collaborative Filtering (–ø–æ –ø–æ—Ö–æ–∂–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º)
2) Content-based Matching (–ø–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é —Ç–æ–≤–∞—Ä–æ–≤)
3) Semantic AI (–ø–æ —Å–º—ã—Å–ª—É –∑–∞–ø—Ä–æ—Å–æ–≤)
4) Geo relevance
5) Trending —Ç–æ–≤–∞—Ä—ã —Ä—è–¥–æ–º
6) –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π
7) –ù–µ–π—Ä–æ—Å–µ—Ç–µ–≤–∞—è –º–æ–¥–µ–ª—å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è (ranking model)

====================================================================
1. BACKEND ‚Äî RecommendationEngine
====================================================================

–°–æ–∑–¥–∞—Ç—å:

`/backend/src/recommendation/RecommendationEngine.ts`

–ú–µ—Ç–æ–¥—ã:

---------------------------------------------------
1.1. getForYouFeed(userId, geo)
---------------------------------------------------

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- —Ç–æ–≤–∞—Ä—ã –≤ –ø–æ—Ä—è–¥–∫–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏.

–ê–ª–≥–æ—Ä–∏—Ç–º:

1) —Å–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   - –∏–Ω—Ç–µ—Ä–µ—Å—ã –∏–∑ UserTwin,
   - –ø—Ä–æ—Å–º–æ—Ç—Ä—ã,
   - –∏–∑–±—Ä–∞–Ω–Ω–æ–µ,
   - watchItems,
   - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–∏—Å–∫–∏,
   - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∫—É–¥–∞ –∑–∞—Ö–æ–¥–∏–ª.

2) —Å–æ–±—Ä–∞—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤:
   - —Ç–æ–≤–∞—Ä—ã –≤ —Ä–∞–¥–∏—É—Å–µ radiusKm –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è,
   - trending —Ç–æ–≤–∞—Ä—ã —Ä–∞–π–æ–Ω–∞,
   - –Ω–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–¥–∞–≤—Ü–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–¥–ø–∏—Å–∞–Ω,
   - —Ç–æ–≤–∞—Ä—ã –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π,
   - —Ç–æ–≤–∞—Ä—ã –∏–∑ –ø–æ—Ö–æ–∂–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

3) —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –ø–æ:
   - —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏,
   - semantic similarity (embeddings),
   - —Ü–µ–Ω–µ (price fit),
   - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é,
   - —Å–µ–∑–æ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ—Ä–µ—Å—É (—è–≥–æ–¥—ã, –≤—ã–ø–µ—á–∫–∞),
   - –ø–∏–∫–æ–≤–æ–π –ø—Ä–æ–¥–∞–∂–µ (—É—Ç—Ä–æ/–≤–µ—á–µ—Ä),
   - —Å–≤–µ–∂–µ—Å—Ç–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è,
   - –∫–∞—á–µ—Å—Ç–≤—É —Ñ–æ—Ç–æ/–æ–ø–∏—Å–∞–Ω–∏–π,
   - CTR –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

4) –≤–µ—Ä–Ω—É—Ç—å JSON c –ø–æ–ª—è–º–∏:
```json
{
  "items": [ ... ],
  "scores": [
     { adId: "...", score: 0.93, reasons: ["–ø–æ–∏—Å–∫–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–µ—Å", "–≥–µ–æ"] },
     ...
  ]
}
1.2. getTrendingNearby(geo)
—Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤ —Ä–∞–π–æ–Ω–µ —Å–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–Ω–æ —Å–º–æ—Ç—Ä—è—Ç,

—Ç–æ–≤–∞—Ä—ã –∏–∑ —Ä–µ–∑–∫–æ –≤—ã—Ä–æ—Å—à–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

1.3. getSimilarItems(adId)
Semantic match (text+image embeddings).

1.4. logUserEvent
–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å:

–ø—Ä–æ—Å–º–æ—Ç—Ä,

—Å–≤–∞–π–ø –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑,

–ª–∞–π–∫/–∏–∑–±—Ä–∞–Ω–Ω–æ–µ,

–æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤,

–ø–∞—É–∑–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ (–≤—Ä–µ–º—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞),

–ø—Ä–æ–ø—É—Å–∫.

Twin –ø–æ–∫—É–ø–∞—Ç–µ–ª—è (MEGA 14) –æ–±–Ω–æ–≤–ª—è—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.

====================================================================
2. BACKEND ‚Äî API
–°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:

/api/recommendations/*

2.1. –ì–ª–∞–≤–Ω–∞—è –ª–µ–Ω—Ç–∞ ¬´For You¬ª
GET /api/recommendations/feed?lat=&lng=&cursor=

–û—Ç–≤–µ—Ç:

–º–∞—Å—Å–∏–≤ items (20‚Äì30)

cursor (–¥–ª—è infinite scroll)

2.2. Trending Nearby
GET /api/recommendations/trending?lat=&lng=

2.3. –ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã
GET /api/recommendations/similar/:adId

====================================================================
3. FRONTEND MINIAPP ‚Äî UI –õ–ï–ù–¢–´ (–∫–∞–∫ TikTok)
–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ MiniApp ‚Üí –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø–æ–¥:

üåÄ Infinite scroll feed:
–ø–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞

–∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω (–∏–ª–∏ 80%)

—Å–≤–∞–π–ø –≤–≤–µ—Ä—Ö ‚Üí —Å–ª–µ–¥—É—é—â–∏–π —Ç–æ–≤–∞—Ä

—Å–≤–∞–π–ø –≤–Ω–∏–∑ ‚Üí –ø—Ä–µ–¥—ã–¥—É—â–∏–π

–ú–æ–∂–Ω–æ 2 —Ä–µ–∂–∏–º–∞:

üîπ ¬´–õ–µ–Ω—Ç–∞¬ª ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ 2 –∫–æ–ª–æ–Ω–∫–∞—Ö
üîπ ¬´For You¬ª ‚Äî –ø–æ—Ö–æ–∂–∞—è –Ω–∞ TikTok (–∫–∞—Ä—Ç–æ—á–∫–∞ –∫—Ä—É–ø–Ω–∞—è, —Å–≤–∞–π–ø–æ–≤–∞—è)
–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å:

–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞ (cover)

–¶–µ–Ω–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ

–ö–Ω–æ–ø–∫–∞ –ª–∞–π–∫–∞ ‚ù§Ô∏è

–ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã¬ª

–®—Ç–æ—Ä–∫–∞ ¬´–ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã¬ª

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

–∞–Ω–∏–º–∞—Ü–∏–∏ (fade, slide)

skeleton loading

====================================================================
4. SR-–†–ê–ù–ñ–ò–†–û–í–ê–ù–ò–ï (Super Relevance Ranking)
–ö–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä –ø–æ–ª—É—á–∞–µ—Ç –æ–±—â–∏–π score –∏–∑:

Similarity score ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º (40%)

Geo score ‚Äî —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (20%)

Trending score ‚Äî –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ —Å–µ–π—á–∞—Å –≥–æ—Ä—è—á–∞—è –ø–æ–∑–∏—Ü–∏—è (20%)

Quality score ‚Äî —Ñ–æ—Ç–æ/–æ–ø–∏—Å–∞–Ω–∏–µ (10%)

Seller affinity ‚Äî –µ—Å—Ç—å –ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞/–∏—Å—Ç–æ—Ä–∏—è (10%)

–†–µ–∑—É–ª—å—Ç–∞—Ç:
–¢–æ–≤–∞—Ä—ã —Ä–∞–Ω–∂–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ –≤ TikTok ‚Äî —Å–∞–º—ã–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π ‚Üí –Ω–∞–≤–µ—Ä—Ö—É.

====================================================================
5. –ü–û–í–ï–î–ï–ù–ß–ï–°–ö–ê–Ø –û–ë–£–ß–ê–ï–ú–´–ï –ú–û–î–ï–õ–ò
–°–∏—Å—Ç–µ–º–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç:

–≤—Ä–µ–º—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏,

–≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è,

–Ω–∞ —á—Ç–æ –∫–ª–∏–∫–Ω—É–ª,

—á—Ç–æ –¥–æ–±–∞–≤–∏–ª –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ,

–∫–∞–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç,

–∫–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç,

—á—Ç–æ –∏—â–µ—Ç —á–∞—Å—Ç–æ,

—Å –∫–∞–∫–∏–º –ø—Ä–æ–¥–∞–≤—Ü–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —á–∞—â–µ,

–≤—Ä–µ–º—è —Å—É—Ç–æ–∫ (–∫–æ–≥–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω).

AI Twin –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è:

—É—Å–∏–ª–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å –∫ –≥—Ä—É–ø–ø–µ,

–æ—Å–ª–∞–±–ª—è–µ—Ç –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

====================================================================
6. GEO-CONTEXT
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –≥–µ–æ-–∑–∞–≤–∏—Å–∏–º—ã–µ:

—Ç–æ–≤–∞—Ä—ã –≤ –±–ª–∏–∂–∞–π—à–µ–º —Ä–∞–¥–∏—É—Å–µ,

—Ç–æ–≤–∞—Ä—ã –ø–æ –ø—É—Ç–∏ (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏ –ª–æ–∫–∞—Ü–∏—é),

—Ç–æ–≤–∞—Ä—ã –∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–æ–Ω,

—Ñ–µ—Ä–º–µ—Ä—ã/–º–∞–≥–∞–∑–∏–Ω—ã —Ä—è–¥–æ–º.

====================================================================
7. –ö–û–ú–ü–û–ù–ï–ù–¢–´ UI –î–õ–Ø MINIAPP
¬´For You Feed¬ª
–§–∞–π–ª:
/miniapp/src/screens/ForYouFeed.tsx

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

CardItemLarge

SwipeHandler

BottomActions (Like / Contact / Similar)

FloatingFilters (–∫–º, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)

SkeletonLoader

Infinite Scroll
–†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ Instagram Reels / TikTok.

AI Banner Insights
–ò–Ω–æ–≥–¥–∞ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏:

¬´üî• –í –≤–∞—à–µ–º —Ä–∞–π–æ–Ω–µ –∏—â—É—Ç –≤–µ–ª–æ—Å–∏–ø–µ–¥—ã¬ª

¬´üí° –¶–µ–Ω–∞ –Ω–∞ iPhone 12 —Å–Ω–∏–∑–∏–ª–∞—Å—å¬ª

¬´üçì –°–≤–µ–∂–∞—è –º–∞–ª–∏–Ω–∞ –ø–æ—è–≤–∏–ª–∞—Å—å —Ä—è–¥–æ–º¬ª

====================================================================
8. –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ¬´–†–ï–ö–û–ú–ï–ù–î–û–í–ê–ù–û –î–õ–Ø –í–ê–°¬ª
Twin –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –ø–æ–ª—É—á–∞–µ—Ç –ø—É—à–∏:

¬´–ü–æ—è–≤–∏–ª–æ—Å—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ, –ø–æ—Ö–æ–∂–µ–µ –Ω–∞ —Ç–æ, —á—Ç–æ –≤—ã –∏—â–µ—Ç–µ¬ª

¬´–°–≤–µ–∂–µ–µ —Ä—è–¥–æ–º: –≤—ã–ø–µ—á–∫–∞ 500 –º –æ—Ç –≤–∞—Å¬ª

¬´–°–µ–≥–æ–¥–Ω—è –ø–∏–∫ –ø—Ä–æ–¥–∞–∂ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Äú—è–≥–æ–¥—ã‚Äù¬ª

====================================================================
9. –ù–ï –õ–û–ú–ê–ï–ú –¢–ï–ö–£–©–ò–ô –§–£–ù–ö–¶–ò–û–ù–ê–õ
–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è

–°—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–õ–µ–Ω—Ç–∞¬ª –æ—Å—Ç–∞—ë—Ç—Å—è

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ –Ω–æ–≤—ã–π —Ä–µ–∂–∏–º ¬´For You¬ª

Backend API —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–µ —Ç—Ä–æ–≥–∞–µ–º

====================================================================
–†–ï–ê–õ–ò–ó–û–í–ê–¢–¨ –í–°–Å –ß–ò–°–¢–û –ù–ê TYPESCRIPT