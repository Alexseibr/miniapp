–û–∫–µ–π, –¥–µ–ª–∞–µ–º **–µ–¥–∏–Ω—ã–π –ú–ï–ì–ê-–ü–†–û–ú–¢**:
–∏ **–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π (8 –º–∞—Ä—Ç–∞ / –ù–æ–≤—ã–π –≥–æ–¥)**, –∏ **–≤–∏—Ç—Ä–∏–Ω—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ ‚Äú—Ç—é–ª—å–ø–∞–Ω—ã / –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∏ / —è—Ä–º–∞—Ä–∫–∞‚Äù**.

–°–∫–æ–ø–∏—Ä—É–π –≤—Å—ë –Ω–∏–∂–µ –≤ Replit / Codex üëá

---

```text
–¢—ã ‚Äî senior full-stack —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ KETMAR Market (–≥–µ–æ-–º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –≤ Telegram MiniApp + web).

–ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

1) –ü–æ–ª–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π (—è—Ä–º–∞—Ä–æ–∫):  
   - 8 –º–∞—Ä—Ç–∞ —Ç—é–ª—å–ø–∞–Ω—ã (`march8_tulips`)  
   - –Ω–æ–≤–æ–≥–æ–¥–Ω—è—è —è—Ä–º–∞—Ä–∫–∞ (`newyear_fair`)  
   - –≤ –±—É–¥—É—â–µ–º –ª—é–±—ã–µ `campaignCode`  
2) –í–∏—Ç—Ä–∏–Ω—ã –∫–∞–º–ø–∞–Ω–∏–π –∏ –≤–∏—Ç—Ä–∏–Ω—ã –º–∞–≥–∞–∑–∏–Ω–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:  
   - ¬´–¢—é–ª—å–ø–∞–Ω—ã 8 –º–∞—Ä—Ç–∞¬ª,  
   - ¬´–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∏ / —è—Ä–º–∞—Ä–∫–∞¬ª,  
   - —Å–µ–∑–æ–Ω–Ω—ã–µ –ø–æ–¥–±–æ—Ä–∫–∏,  
   - —Ç–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã –∫–∞–º–ø–∞–Ω–∏–∏ —É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞.

–ü—Ä–∏ —ç—Ç–æ–º:

- —Ç—é–ª—å–ø–∞–Ω—ã –∏ –Ω–æ–≤–æ–≥–æ–¥–Ω—è—è —è—Ä–º–∞—Ä–∫–∞ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ **–º–∞–≥–∞–∑–∏–Ω–∞–º** (store),
- –æ—Å–µ–Ω–Ω—è—è —è—Ä–º–∞—Ä–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è —Ñ–µ—Ä–º–µ—Ä—Å–∫–æ–π (farmer),
- –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫—Ä—É–≥–ª–æ–≥–æ–¥–∏—á–Ω—ã–µ —è—Ä–º–∞—Ä–∫–∏ —Å—á–∏—Ç–∞–µ–º ¬´–º–∞–≥–∞–∑–∏–Ω–Ω—ã–º–∏¬ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

---

## 0. –ë–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –º–æ–¥–µ–ª–∏

–£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å:

- `User`
- `Store` (–º–∞–≥–∞–∑–∏–Ω) ‚Äî –∫–∞–±–∏–Ω–µ—Ç –º–∞–≥–∞–∑–∏–Ω–∞
- `Ad` ‚Äî –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
- `AdEvent` ‚Äî —Å–æ–±—ã—Ç–∏—è (–ø—Ä–æ—Å–º–æ—Ç—Ä / –∫–ª–∏–∫ –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç—É / –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ —Ç.–¥.) ‚Äî –µ—Å–ª–∏ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π (—Å–º. –Ω–∏–∂–µ)

–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

### 0.1. –ú–æ–¥–µ–ª—å –∫–∞–º–ø–∞–Ω–∏–π

–°–æ–∑–¥–∞–π –º–æ–¥–µ–ª—å `Campaign` (Mongoose):

- `code: string` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä:
  - `"march8_tulips"`
  - `"newyear_fair"`
  - `"autumn_fair"`
  - `"summer_sale"`
- `title: string` ‚Äî —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
- `description?: string`
- `type: "store" | "farmer"` ‚Äî –∫–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è (–º–∞–≥–∞–∑–∏–Ω—ã –∏–ª–∏ —Ñ–µ—Ä–º–µ—Ä—ã)
- `startDate?: Date`
- `endDate?: Date`
- `isActive: boolean`
- `createdAt: Date`
- `updatedAt: Date`

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π (–º–∏–≥—Ä–∞—Ü–∏–µ–π / —Å–∏–¥–æ–º) –º–∏–Ω–∏–º—É–º:

1) `march8_tulips` ‚Äî `type = "store"`
2) `newyear_fair` ‚Äî `type = "store"`
3) `autumn_fair` ‚Äî `type = "farmer"`

### 0.2. –ü–æ–ª–µ –∫–∞–º–ø–∞–Ω–∏–∏ –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö

–í `Ad` –¥–æ–±–∞–≤–∏—Ç—å:

- `campaignCode?: string` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–º–ø–∞–Ω–∏—é (–ø–æ `code`)
- `storeId?: ObjectId` ‚Äî –º–∞–≥–∞–∑–∏–Ω (–¥–ª—è –∫–∞–º–ø–∞–Ω–∏–π `type="store"` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
- `isFarmerAd?: boolean` ‚Äî –¥–ª—è —Ñ–µ—Ä–º–µ—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)

–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:

- –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å `campaignCode="march8_tulips"` –∏–ª–∏ `"newyear_fair"`:
  - **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `storeId` (–º–∞–≥–∞–∑–∏–Ω),
  - —Ñ–µ—Ä–º–µ—Ä—Å–∫–∏–µ –±–µ–∑ –º–∞–≥–∞–∑–∏–Ω–∞ —Å—é–¥–∞ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç.

---

## 1. AdEvent (–µ—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—Ç—å / –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å)

–ú–æ–¥–µ–ª—å `AdEvent`:

- `adId: ObjectId`
- `storeId?: ObjectId`
- `campaignCode?: string`
- `userId?: ObjectId`
- `type: "view" | "favorite" | "contact_click" | "open_telegram" | "call_click" | "share" | "open_store" | "open_campaign"`
- `source: "organic" | "campaign" | "boost" | "banner" | "push"`
- `createdAt: Date`
- `geo?: { type: "Point", coordinates: [lng, lat] }`
- `categoryId?: ObjectId`
- `priceAtMoment?: number` ‚Äî —Ü–µ–Ω–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–±—ã—Ç–∏—è (–¥–ª—è —Ü–µ–Ω–æ–≤–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ–∑–∂–µ)

–ò–Ω–¥–µ–∫—Å—ã:

- `{ campaignCode: 1, createdAt: 1 }`
- `{ storeId: 1, createdAt: 1 }`
- `{ adId: 1, createdAt: 1 }`
- –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≥–µ–æ ‚Äî 2dsphere –ø–æ `geo`.

–§—Ä–æ–Ω—Ç –¥–æ–ª–∂–µ–Ω —É–∂–µ —É–º–µ—Ç—å —Å–ª–∞—Ç—å —Å–æ–±—ã—Ç–∏—è (–µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤–∏—Ç—å):

- –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è: `type="view"`, `source` = `"campaign"` –µ—Å–ª–∏ –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ –∫–∞–º–ø–∞–Ω–∏–∏.
- –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É: `type="contact_click"`
- –ø—Ä–∏ –∫–ª–∏–∫–µ ¬´–Ω–∞–ø–∏—Å–∞—Ç—å –≤ Telegram¬ª: `type="open_telegram"`
- –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –≤–∏—Ç—Ä–∏–Ω—É –∫–∞–º–ø–∞–Ω–∏–∏: `type="open_campaign"` —Å `campaignCode`.

---

## 2. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π (march8 / newyear / –ª—é–±—ã–µ)

–°–æ–∑–¥–∞—Ç—å router `/api/campaign-analytics` (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ + –∫–∞–±–∏–Ω–µ—Ç–∞ –º–∞–≥–∞–∑–∏–Ω–∞, –≥–¥–µ –≤–ª–∞–¥–µ–ª–µ—Ü –≤–∏–¥–∏—Ç —Å–≤–æ–∏ –∫–∞–º–ø–∞–Ω–∏–∏).

### 2.1. –û–±–∑–æ—Ä –∫–∞–º–ø–∞–Ω–∏–∏

`GET /api/campaign-analytics/overview?campaignCode=march8_tulips&period=7d|30d`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

- `campaign` ‚Äî –¥–∞–Ω–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ (`title`, `startDate`, `endDate`, `type`)
- –ü–µ—Ä–∏–æ–¥ (`periodStart`, `periodEnd`)
- –û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥:
  - `totalViews`
  - `totalContactClicks`
  - `totalFavorites`
  - `totalShares`
  - `ctrContacts` = contactClicks/views
- –†–∞–∑—Ä–µ–∑ –ø–æ –∫–∞–Ω–∞–ª–∞–º source:
  - `{ source: "organic" | "push" | "banner" | ..., views, contactClicks }`
- –¢–û–ü –º–∞–≥–∞–∑–∏–Ω–æ–≤ –≤ –∫–∞–º–ø–∞–Ω–∏–∏:
  - `topStoresByViews` ‚Äî 5 –º–∞–≥–∞–∑–∏–Ω–æ–≤: `storeId, name, views, contactClicks`
  - `topStoresByContactClicks`
- –¢–û–ü –æ–±—ä—è–≤–ª–µ–Ω–∏–π:
  - `topAdsByViews` ‚Äî 5 –æ–±—ä—è–≤–ª–µ–Ω–∏–π: `adId, title, storeName, views, contactClicks, favorites`

–í—ã–±–æ—Ä–∫–∞:

- —Ç–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è `AdEvent`, –≥–¥–µ:
  - `campaignCode = ?`
  - `createdAt` –≤ –ø–µ—Ä–∏–æ–¥–µ.

### 2.2. –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –ø–æ –¥–Ω—è–º –≤–Ω—É—Ç—Ä–∏ –∫–∞–º–ø–∞–Ω–∏–∏

`GET /api/campaign-analytics/daily?campaignCode=march8_tulips&metric=views|contactClicks|favorites&period=30d`

–û—Ç–≤–µ—Ç:

- –º–∞—Å—Å–∏–≤:
  - `{ date: "YYYY-MM-DD", value: number }`
- `totalValue`

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `AdEvent` + `$group` –ø–æ –¥–∞—Ç–µ.

–í–ê–ñ–ù–û: –≠—Ç–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã –≤ –∞–¥–º–∏–Ω–∫–µ / –≤ PRO-–∫–∞–±–∏–Ω–µ—Ç–µ.

### 2.3. –ì–µ–æ–≥—Ä–∞—Ñ–∏—è —Å–ø—Ä–æ—Å–∞ –∫–∞–º–ø–∞–Ω–∏–∏

`GET /api/campaign-analytics/geo?campaignCode=march8_tulips&period=30d`

–û—Ç–≤–µ—Ç:

- —Å–ø–∏—Å–æ–∫ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –ø–æ `city` / `region` / `lat-lng` (—É–ø—Ä–æ—â—ë–Ω–Ω–æ):

–í–∞—Ä–∏–∞–Ω—Ç 1 (–ø–æ –≥–æ—Ä–æ–¥–∞–º/—Ä–∞–π–æ–Ω–∞–º):

- `{ city, region, views, contactClicks }`

–í–∞—Ä–∏–∞–Ω—Ç 2 (heatmap):

- `{ lat, lng, weight: number }`  
  –≥–¥–µ `weight` = –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ –ø–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º/–∫–ª–∏–∫–∞–º.

–ü–æ–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É—Ä–æ–≤–Ω—è –≥–æ—Ä–æ–¥/—Ä–∞–π–æ–Ω, –Ω–æ –∫–æ–¥ –¥–ª—è –≥–µ–æ-heatmap —Ç–æ–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤—å (—á–µ—Ä–µ–∑ `geo` –≤ `AdEvent`).

### 2.4. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ü–µ–Ω –∫–∞–º–ø–∞–Ω–∏–∏ (—Ç—é–ª—å–ø–∞–Ω—ã / –ù–æ–≤—ã–π –≥–æ–¥)

`GET /api/campaign-analytics/prices?campaignCode=march8_tulips&period=7d`

–û—Ç–≤–µ—Ç:

- `avgPrice` –ø–æ –∫–∞–º–ø–∞–Ω–∏–∏
- `minPrice`, `maxPrice`
- `adsCount`
- —Ä–∞–∑—Ä–µ–∑ –ø–æ –≥–æ—Ä–æ–¥—É/—Ä–∞–π–æ–Ω—É:

  - –º–∞—Å—Å–∏–≤ `{ city, avgPrice, adsCount }`

`priceAtMoment` –º–æ–∂–Ω–æ –±—Ä–∞—Ç—å:

- –ª–∏–±–æ –∏–∑ `AdEvent`,
- –ª–∏–±–æ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ `Ad` (–∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞), –µ—Å–ª–∏ —Å—á–∏—Ç–∞—Ç—å –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç.

–≠—Ç–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω—É–∂–Ω–∞, —á—Ç–æ–±—ã:

- –≤–∏–¥–µ—Ç—å —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É –Ω–∞ —Ç—é–ª—å–ø–∞–Ω—ã –ø–æ –≥–æ—Ä–æ–¥—É,
- —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –º–∞–≥–∞–∑–∏–Ω—ã,
- –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü–∞–º, —Å–∫–æ–ª—å–∫–æ –æ–Ω–∏ –Ω–∏–∂–µ/–≤—ã—à–µ —Ä—ã–Ω–∫–∞.

---

## 3. –í–∏—Ç—Ä–∏–Ω–∞ –∫–∞–º–ø–∞–Ω–∏–π (–æ–±—â–∞—è –∏ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞)

### 3.1. –ü—É–±–ª–∏—á–Ω–∞—è –≤–∏—Ç—Ä–∏–Ω–∞ –∫–∞–º–ø–∞–Ω–∏–∏ (–≥–ª–æ–±–∞–ª—å–Ω–∞—è)

–ù–æ–≤–æ–µ API:

`GET /api/campaigns/:campaignCode/ads?lat=&lng=&radiusKm=&sort=distance|price|popular&page=&limit=`

–§–∏–ª—å—Ç—Ä—ã:

- `campaignCode` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (march8_tulips / newyear_fair / etc.)
- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:
  - `lat, lng, radiusKm` ‚Äî –µ—Å–ª–∏ –∑–∞–¥–∞–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–µ–æ–ø–æ–∏—Å–∫, —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é;
  - –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω—ã ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏.

–û—Ç–≤–µ—Ç:

- `ads: [ { adId, title, price, mainPhotoUrl, storeName, distanceKm?, city, badges[] } ]`
- `total`
- `page`
- `hasMore`

–ë–µ–π–¥–∂–∏:

- –¥–ª—è —Ç—é–ª—å–ø–∞–Ω–æ–≤:
  - `["–±—É–∫–µ—Ç", "–ø–æ —à—Ç—É—á–Ω–æ", "–Ω–∏–∂e —Ä—ã–Ω–∫–∞ –Ω–∞ X%"]`
- –¥–ª—è –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö:
  - `["–ø–æ–¥–∞—Ä–æ—á–Ω—ã–π –Ω–∞–±–æ—Ä", "–¥–µ—Ç—è–º", "—Å–≤–µ—á–∏", "—ë–ª–∫–∞"]` –∏ —Ç.–ø. (–º–æ–∂–Ω–æ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω–æ –ø–æ —Å–ª–æ–≤–∞–º).

–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ (MiniApp):

- –°—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–Ø—Ä–º–∞—Ä–∫–∞ 8 –º–∞—Ä—Ç–∞¬ª –∏ ¬´–ù–æ–≤–æ–≥–æ–¥–Ω—è—è —è—Ä–º–∞—Ä–∫–∞¬ª:
  - —Å–≤–µ—Ä—Ö—É –∑–∞–≥–æ–ª–æ–≤–æ–∫ + –æ–ø–∏—Å–∞–Ω–∏–µ,
  - —Å–µ–ª–µ–∫—Ç–æ—Ä: `—Ä—è–¥–æ–º —Å–æ –º–Ω–æ–π` / `–ø–æ –≥–æ—Ä–æ–¥—É`,
  - —Å–µ–ª–µ–∫—Ç–æ—Ä —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏: `–ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é`, `–¥–µ—à–µ–≤–ª–µ`, `–ø–æ–ø—É–ª—è—Ä–Ω–µ–µ`,
  - —Å–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ (2 –≤ —Ä—è–¥ –∏–ª–∏ 1 –≤ —Ä—è–¥, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ UI).

### 3.2. –í–∏—Ç—Ä–∏–Ω–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –¥–ª—è –∫–∞–º–ø–∞–Ω–∏–∏

–ù–æ–≤–æ–µ API:

`GET /api/store/:storeSlug/campaign/:campaignCode/ads?page=&limit=&sort=...`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è **–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞** –≤–Ω—É—Ç—Ä–∏ –∫–∞–º–ø–∞–Ω–∏–∏.

–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ:

- –í –ø—É–±–ª–∏—á–Ω–æ–π –≤–∏—Ç—Ä–∏–Ω–µ –º–∞–≥–∞–∑–∏–Ω–∞ (–º–∏–∫—Ä–æ—Å–∞–π—Ç –º–∞–≥–∞–∑–∏–Ω–æ–≤, –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –∏–ª–∏ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å):

  - –¥–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫–∏:
    - ¬´–í—Å–µ —Ç–æ–≤–∞—Ä—ã¬ª
    - ¬´–¢—é–ª—å–ø–∞–Ω—ã 8 –º–∞—Ä—Ç–∞¬ª (–µ—Å–ª–∏ —É –º–∞–≥–∞–∑–∏–Ω–∞ –µ—Å—Ç—å —Ç–∞–∫–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è)
    - ¬´–ù–æ–≤–æ–≥–æ–¥–Ω—è—è —è—Ä–º–∞—Ä–∫–∞¬ª (–µ—Å–ª–∏ –µ—Å—Ç—å)

–õ–æ–≥–∏–∫–∞:

- –≤–∫–ª–∞–¥–∫—É –∫–∞–º–ø–∞–Ω–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –º–∞–≥–∞–∑–∏–Ω–∞ –µ—Å—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º `campaignCode`.

---

## 4. –ö–Ω–æ–ø–∫–∏/—Ñ–ª–æ—É –ø–æ–¥–∞—á–∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞–º–ø–∞–Ω–∏—é

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ / —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –º–∞–≥–∞–∑–∏–Ω–∞:

- –µ—Å–ª–∏ —Ç–µ–∫—É—â–∏–π –ø–µ—Ä–∏–æ–¥ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –∞–∫—Ç–∏–≤–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –∫–∞–º–ø–∞–Ω–∏–π (`march8_tulips`, `newyear_fair`):
  - –ø–æ–∫–∞–∑–∞—Ç—å –±–ª–æ–∫:

    > ¬´–°–µ–π—á–∞—Å –∏–¥—ë—Ç –∫–∞–º–ø–∞–Ω–∏—è:  
    > [–¢—é–ª—å–ø–∞–Ω—ã 8 –º–∞—Ä—Ç–∞] [–ù–æ–≤–æ–≥–æ–¥–Ω—è—è —è—Ä–º–∞—Ä–∫–∞]  
    > –û—Ç–º–µ—Ç—å—Ç–µ, –µ—Å–ª–∏ —ç—Ç–æ —Ç–æ–≤–∞—Ä –¥–ª—è –∫–∞–º–ø–∞–Ω–∏–∏.¬ª

  - —á–µ–∫–±–æ–∫—Å—ã:
    - ¬´–û—Ç–Ω–µ—Å—Ç–∏ –∫ —Ç—é–ª—å–ø–∞–Ω–∞–º 8 –º–∞—Ä—Ç–∞¬ª
    - ¬´–û—Ç–Ω–µ—Å—Ç–∏ –∫ –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–π —è—Ä–º–∞—Ä–∫–µ¬ª

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ —á–µ–∫–±–æ–∫—Å–∞:

- –≤ –∑–∞–ø—Ä–æ—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è —É–∫–∞–∑—ã–≤–∞—Ç—å:
  - `campaignCode = "march8_tulips"` –∏–ª–∏ `"newyear_fair"`.

---

## 5. PRO-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞

–í –∫–∞–±–∏–Ω–µ—Ç–µ –º–∞–≥–∞–∑–∏–Ω–∞ (Store PRO):

–î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫ –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –æ–±—â–µ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞:

### 5.1. –°–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π –º–∞–≥–∞–∑–∏–Ω–∞

`GET /api/store/me/campaigns`

- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º–∞–≥–∞–∑–∏–Ω —É—á–∞—Å—Ç–≤—É–µ—Ç (–µ—Å—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å `storeId` –∏ `campaignCode`):
  - `campaignCode`, `title`, `isActive`, `adsCount`, `views`, `contactClicks`.

–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ:

- –í–∫–ª–∞–¥–∫–∞ ¬´–ö–∞–º–ø–∞–Ω–∏–∏¬ª –≤–Ω—É—Ç—Ä–∏ PRO-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞.
- –ü–æ –∫–∞–∂–¥–æ–π –∫–∞–º–ø–∞–Ω–∏–∏:
  - –Ω–∞–∑–≤–∞–Ω–∏–µ,
  - –ø–µ—Ä–∏–æ–¥,
  - `–¢–æ–≤–∞—Ä–æ–≤: N`,
  - `–ü—Ä–æ—Å–º–æ—Ç—Ä—ã / –ö–ª–∏–∫–∏ –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º`.

### 5.2. –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞

`GET /api/store/me/campaigns/:campaignCode/analytics?period=7d|30d`

–≠—Ç–æ —É–∂–µ –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (–ø–æ –≤—Å–µ–º –º–∞–≥–∞–∑–∏–Ω–∞–º), –∞ **—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞**:

–í–µ—Ä–Ω—É—Ç—å:

- `totalViews`, `totalContactClicks`, `totalFavorites`
- `topAds` –º–∞–≥–∞–∑–∏–Ω–∞ –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–π –∫–∞–º–ø–∞–Ω–∏–∏
- `daily` –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ (–∫–∞–∫ –≤—ã—à–µ, –Ω–æ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ `storeId`)

–§—Ä–æ–Ω—Ç:

- –≤–Ω—É—Ç—Ä–∏ –≤–∫–ª–∞–¥–∫–∏ ¬´–ö–∞–º–ø–∞–Ω–∏–∏¬ª ‚Üí –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–∞–º–ø–∞–Ω–∏—é –æ—Ç–∫—Ä—ã–≤–∞–µ–º –µ—ë –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Ä–∞–Ω:
  - –æ–±–∑–æ—Ä,
  - –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞,
  - —Ç–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤.

---

## 6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ —Ñ–µ—Ä–º–µ—Ä—Å–∫–æ–º—É –∫–∞–±–∏–Ω–µ—Ç—É

–í–∞–∂–Ω–æ:

- **–û—Å–µ–Ω–Ω—è—è —è—Ä–º–∞—Ä–∫–∞ (`autumn_fair`)** –æ—Å—Ç–∞—ë—Ç—Å—è —Ñ–µ—Ä–º–µ—Ä—Å–∫–æ–π:
  - `type = "farmer"`
  - –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –≥–¥–µ `campaignCode="autumn_fair"` –∏ `isFarmerAd=true`
  - –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ñ–µ—Ä–º–µ—Ä—Å–∫–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ, –æ—Ç–¥–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ `/api/campaign-analytics`, –Ω–æ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `type="farmer"`).

- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ (`march8_tulips`, `newyear_fair`, –¥—Ä—É–≥–∏–µ –∫—Ä—É–≥–ª–æ–≥–æ–¥–∏—á–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏) ‚Äî –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ `type="store"`:
  - –ø–æ–ø–∞–¥–∞—é—Ç –≤ –º–∞–≥–∞–∑–∏–Ω–Ω—ã–π PRO-–∫–∞–±–∏–Ω–µ—Ç.

–£–±–µ–¥–∏—Å—å:

- —á—Ç–æ –≤ query/—Ñ–∏–ª—å—Ç—Ä–∞—Ö –ø–æ –∫–∞–º–ø–∞–Ω–∏–∏ –≤—Å–µ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è `type`, —á—Ç–æ–±—ã —Ñ–µ—Ä–º–µ—Ä—Å–∫–∏–π –∏ –º–∞–≥–∞–∑–∏–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª–∏.

---

## 7. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Backend: TypeScript + Express + Mongoose, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç —Ä–æ—É—Ç–µ—Ä–æ–≤.
- –ü—Ä–æ–¥—É–º–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏ –ª–∏–º–∏—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `limit=20`).
- –í–µ–∑–¥–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∞–≤–∞:
  - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏;
  - –º–∞–≥–∞–∑–∏–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞.
- –§—Ä–æ–Ω—Ç (MiniApp):
  - UI –Ω–µ –ª–æ–º–∞—Ç—å, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫ —Ç–µ–∫—É—â–µ–º—É —Å—Ç–∏–ª—é: —Ç–∞–±—ã / –∫–∞—Ä—Ç–æ—á–∫–∏ / –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã.
  - –î–ª—è –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º –º–æ–∂–Ω–æ –æ—Ç–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ ‚Äî –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å–¥–µ–ª–∞–µ—Ç —Ñ—Ä–æ–Ω—Ç —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–∏–±—É.

–¶–µ–ª—å:
- –°–¥–µ–ª–∞—Ç—å –µ–¥–∏–Ω—É—é, –∞–∫–∫—É—Ä–∞—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É **–∫–∞–º–ø–∞–Ω–∏–π (—è—Ä–º–∞—Ä–æ–∫)**:
  - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –≤–∏—Ç—Ä–∏–Ω–∞ –ø–æ –∫–∞–º–ø–∞–Ω–∏–∏ (8 –º–∞—Ä—Ç–∞ / –ù–æ–≤—ã–π –≥–æ–¥),
  - –≤–∏—Ç—Ä–∏–Ω–∞ –∫–∞–º–ø–∞–Ω–∏–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ,
  - –ø–æ–ª–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –∫–ª–∏–∫–∏, –≥–µ–æ, —Ü–µ–Ω—ã),
  - –º–∞–≥–∞–∑–∏–Ω–Ω—ã–π PRO-–∫–∞–±–∏–Ω–µ—Ç —Å –≤–∫–ª–∞–¥–∫–æ–π ¬´–ö–∞–º–ø–∞–Ω–∏–∏¬ª,
  - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: –º–∞–≥–∞–∑–∏–Ω–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ vs —Ñ–µ—Ä–º–µ—Ä—Å–∫–∏–µ (–æ—Å–µ–Ω–Ω—è—è —è—Ä–º–∞—Ä–∫–∞).
```

---

–ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å, –¥–∞–ª—å—à–µ –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–º—Ç —á–∏—Å—Ç–æ –ø–æ–¥ UI —ç—Ç–∏—Ö –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º –∏ –≤–∏—Ç—Ä–∏–Ω** –≤ —Å—Ç–∏–ª–µ –Ω–∞—à–µ–≥–æ matrix/–Ω–µ–æ–Ω-–¥–∏–∑–∞–π–Ω–∞.
