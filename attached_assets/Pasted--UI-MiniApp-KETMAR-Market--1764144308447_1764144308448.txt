Хочу полностью переработать UI/дизайн карты во вкладке “Карта” в MiniApp KETMAR Market, но СТРОГО без изменения логики и API.  
Сосредоточься только на визуале, стилях, компонентах и UX поведения карты.

ЦЕЛЬ
Сделать карту уровня Avito + Yandex Go + Apple Maps:
- мягкая, современная, светлая,
- пины: красивые, объемные, разные по типам (фермер / магазин / частник),
- кластеры: круглые, воздушные, в стиле iOS,
- heatmap спроса: мягкая визуализация спроса/предложений,
- интерактив: плавные появления, hover/tap-анимации.

ТЕХНОСТЕК
React + TypeScript, Telegram MiniApp, используем библиотеку карты, которая уже подключена:
- либо react-yandex-maps,
- либо react-map-gl,
- либо Leaflet (если уже стоит).
НЕ меняй библиотеку, работай с тем, что есть.

ТРЕБОВАНИЯ ПО ДИЗАЙНУ ПИНОВ

1. Сделай три типа маркеров:
   A) Частные продавцы  
      - Фирменный синий KETMAR  
      - Форма: “капля” с мягким градиентом (#3B82F6 → #60A5FA)  
      - Маленькая белая точка внутри

   B) Фермеры / продукты / сезонка  
      - Зеленый градиент (#22C55E → #4ADE80)  
      - Внутри иконка листочка (SVG, минимализм)

   C) Магазины / витрины  
      - Фиолетовый (#8B5CF6 → #C084FC)  
      - Внутри иконка домика/магазина

2. У каждого маркера:
   - небольшая тень (shadow-md),
   - при tap — легкий “пружинный” zoom 1.1x (scale animation),
   - при выборе — показывает мини-лупу (tooltip) с ценой и названием.

КЛАСТЕРЫ (группы)

1. Кластеры округлой формы (кружок).
2. Цвет кластера зависит от доминирующего типа объявлений внутри:
   - фермеры → зеленый,
   - магазины → фиолетовый,
   - частники → синий.
3. Число внутри — жирное, белое.
4. Градиентный фон + мягкая внешняя тень.
5. Анимации:
   - появление: scale 0.7 → 1.0 (150ms)
   - раскрытие: с плавным разлетом точек

HEATMAP (карта спроса / частоты объявлений)

Добавь слой heatmap:

- градиент в стиле Apple Maps:
  - холодный (мало объявлений) → #93C5FD (голубой)
  - средний спрос → #3B82F6 (синий)
  - высокий спрос → #1D4ED8 (темно-синий)
  - пиковый спрос → #EF4444 (красный, но слабый, не токсичный)

- Прозрачность 0.3–0.55 (не перекрывает карту)
- Радиус пятен — динамический: 20–40px
- Плавное появление слоя (fade-in 0.5s)

ПОВЕДЕНИЕ ПРИ ТАПЕ ПО МАРКЕРУ

1. Показывай красивую всплывающую карточку поверх карты:
   - фото товара (thumbnail),
   - цена,
   - расстояние до продавца,
   - имя продавца + тип (фермер/магазин/частник),
   - кнопка “Открыть объявление”.

2. Карточка всплывает снизу, но не перекрывает весь экран:
   - высота ~38% экрана
   - blur-background (как iOS)
   - скругления: border-radius 22px

3. На карте:
   - выбранный маркер должен слегка “подпрыгнуть” (scale 1.1)
   - все остальные слегка затемняются (opacity 0.65)

ПОДПИСИ НА КАРТЕ (UX)

Добавь мини-бейджи на карту, которые показывают:
- “Горячая зона” (если много объявлений)
- “Фермерский район” (если много овощей/ягод)
- “Магазины рядом” (если рядом 2+ магазинов)

Стили бейджа:
- белый фон, тень, радиус 12px,
- маленькая иконка + текст.

АНИМАЦИИ
Все анимации должны быть:
- короткие (120–180ms),
- пружинные (spring easing),
- как в iOS.

Адаптация под мини-апп Телеграма:
- не вылезать за safeAreaInsets,
- учитывать скругления браузера Telegram,
- карта должна быть на 100% высоты минус tabbar.

НЕ МЕНЯТЬ:
- логику API,
- функцию поиска,
- радиусы,
- фильтры,
- бизнес-логику карты.

Только стиль, внешний вид, анимации и визуальное поведение маркеров, кластеров и всплывающей карточки.

ВЫХОД:
Полностью обновлённый компонент карты с новым дизайном:
- кастомные маркеры 3 типов,
- кластеры,
- heatmap,
- всплывающая карточка,
- анимации,
- красивый современный UI.
✔ Готово
Это идеальный промт для Replit/Codex, который отвечает только за ДИЗАЙН карты — без переписывания логики.

