–ß—Ç–æ –º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å
üî∏ Telegram: Closing confirmation is not supported in version 6.0
[Telegram.WebApp] Closing confirmation is not supported in version 6.0


–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:

–¢—ã –≥–¥–µ-—Ç–æ –≤—ã–∑—ã–≤–∞–µ—à—å Telegram.WebApp.enableClosingConfirmation() –∏–ª–∏ setClosingConfirmation(true).

–í —Ç–≤–æ–µ–π –≤–µ—Ä—Å–∏–∏ Telegram WebApp (v6.0) —ç—Ç–∞ —Ñ–∏—á–∞ –µ—â—ë –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

–†–∞–±–æ—Ç–∞—Ç—å –º–µ—à–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç, –ø—Ä–æ—Å—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è –º–∏–Ω–∏-–∞–ø–ø—ã –Ω–µ –≤–∫–ª—é—á–∏—Ç—Å—è.

–ú–æ–∂–Ω–æ:

–æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ),
–∏–ª–∏

–æ–±–µ—Ä–Ω—É—Ç—å –≤ –ø—Ä–æ–≤–µ—Ä–∫—É –≤–µ—Ä—Å–∏–∏ –∏ –≤—ã–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

üî∏ React Router Future Flag Warning

–≠—Ç–æ:

‚ö†Ô∏è React Router Future Flag Warning: ...


‚Äî —á–∏—Å—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–æ –±—É–¥—É—â—É—é v7, –Ω–∞ —Ä–∞–±–æ—Ç—É –Ω–µ –≤–ª–∏—è—é—Ç –≤–æ–æ–±—â–µ. –ú–æ–∂–µ—à—å –∑–∞–±–∏—Ç—å.

2. –û—à–∏–±–∫–∞ –ø–æ –ª–æ–≥–æ—Ç–∏–ø—É
ketmar_logo_rgb.svg:1  Failed to load resource: the server responded with a status of 404 (Not Found)


–ó–Ω–∞—á–∏—Ç:

–õ–∏–±–æ —Ñ–∞–π–ª —Ä–µ–∞–ª—å–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ø—Ä–æ–µ–∫—Ç–µ,

–õ–∏–±–æ –ø—É—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.

–ï—Å–ª–∏ —Ç—ã –≤ React/Vite:

–í–∞—Ä–∏–∞–Ω—Ç –ê. –ß–µ—Ä–µ–∑ public

–ü–æ–ª–æ–∂–∏ —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É public/ketmar_logo_rgb.svg

–í –∫–æ–¥–µ:

<img src="/ketmar_logo_rgb.svg" alt="KETMAR Market" />


–í–∞—Ä–∏–∞–Ω—Ç –ë. –ß–µ—Ä–µ–∑ –∏–º–ø–æ—Ä—Ç –∏–∑ src/assets

–ü–∞–ø–∫–∞: src/assets/ketmar_logo_rgb.svg

–í –∫–æ–¥–µ:

import logo from '../assets/ketmar_logo_rgb.svg';

<img src={logo} alt="KETMAR Market" />

3. –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: ads.map is not a function

–í–æ—Ç —ç—Ç–æ –∫–∞–∫ —Ä–∞–∑ —Ç–æ, –∏–∑-–∑–∞ —á–µ–≥–æ –≤—Å—ë –ø–∞–¥–∞–µ—Ç:

TypeError: ads.map is not a function
    at AdList (AdList.tsx:100:14)

–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç

map –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ —É –º–∞—Å—Å–∏–≤–æ–≤.
–û—à–∏–±–∫–∞ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ ads ‚Äî –ù–ï –º–∞—Å—Å–∏–≤. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å:

undefined

null

{ ...object... }

—Å—Ç—Ä–æ–∫–∞

—á–∏—Å–ª–æ

–¢–∏–ø–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

–ë—ç–∫–µ–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ –º–∞—Å—Å–∏–≤, –∞ –æ–±—ä–µ–∫—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä:

{
  "items": [ ... ],
  "total": 15,
  "page": 1
}


–ê –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ —Ç—ã –¥–µ–ª–∞–µ—à—å:

ads.map(...)


–≥–¥–µ ads = data (–≤—Å—ë —Ü–µ–ª–∏–∫–æ–º), –∞ –Ω–µ data.items.

–ò–ª–∏ –µ—â—ë –≤–∞—Ä–∏–∞–Ω—Ç: –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:

const [ads, setAds] = useState({}); // <-- –æ–±—ä–µ–∫—Ç
// ...
ads.map(...) // üí•

4. –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ AdList.tsx

–Ø –¥–∞–º —Ç–µ–±–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥, —á—Ç–æ–±—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –ø–∞–¥–∞–ª, –¥–∞–∂–µ –µ—Å–ª–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏—à–ª–∞ —Ñ–∏–≥–Ω—è.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É —Ç–µ–±—è —Å–µ–π—á–∞—Å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

type AdListProps = {
  ads: any; // –∏–ª–∏ Ad[]
};

export const AdList: React.FC<AdListProps> = ({ ads }) => {
  return (
    <div>
      {ads.map((ad) => (
        <AdCard key={ad._id} ad={ad} />
      ))}
    </div>
  );
};


–ü–µ—Ä–µ–¥–µ–ª–∞–µ–º —Ç–∞–∫:

type AdListProps = {
  ads: any; // –≤—Ä–µ–º–µ–Ω–Ω–æ any, –≥–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –Ω–∏–∂–µ
};

export const AdList: React.FC<AdListProps> = ({ ads }) => {
  // üß† –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ —É –Ω–∞—Å –ú–ê–°–°–ò–í
  const safeAds =
    Array.isArray(ads)
      ? ads
      : Array.isArray(ads?.items)
        ? ads.items
        : Array.isArray(ads?.data)
          ? ads.data
          : [];

  if (!safeAds.length) {
    return <div>–ü–æ–∫–∞ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>;
  }

  return (
    <div>
      {safeAds.map((ad: any) => (
        <AdCard key={ad._id || ad.id} ad={ad} />
      ))}
    </div>
  );
};


–¢–µ–ø–µ—Ä—å:

–ï—Å–ª–∏ –ø—Ä–∏–¥—ë—Ç { items: [...] } ‚Üí –≤–æ–∑—å–º—ë–º items

–ï—Å–ª–∏ { data: [...] } ‚Üí –≤–æ–∑—å–º—ë–º data

–ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞–∫ –µ—Å—Ç—å

–ï—Å–ª–∏ –ø—Ä–∏—à–ª–æ —á—Ç–æ-—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ–µ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º ‚Äú–ü–æ–∫–∞ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π‚Äù, –Ω–æ –±–µ–∑ –ø–∞–¥–µ–Ω–∏—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

5. –ï—Å–ª–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å React Query

–û—á–µ–Ω—å —á–∞—Å—Ç–æ —É —Ç–µ–±—è –≥–¥–µ-—Ç–æ –µ—Å—Ç—å:

const { data, isLoading, isError } = useQuery(['ads'], fetchAds);


–ò –¥–∞–ª—å—à–µ —Ç—ã –¥–µ–ª–∞–µ—à—å:

<AdList ads={data} />


–¢—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫:

const { data, isLoading, isError } = useQuery(['ads'], fetchAds);

if (isLoading) return <div>–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π...</div>;
if (isError) return <div>–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>;

const ads = Array.isArray(data)
  ? data
  : Array.isArray(data?.items)
    ? data.items
    : Array.isArray(data?.data)
      ? data.data
      : [];

return <AdList ads={ads} />;

6. –ü–æ—á–µ–º—É –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –º–Ω–æ–≥–æ —Ä–∞–∑

–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:

Global error: TypeError: ads.map is not a function

–ü–æ—Ç–æ–º React —Ä—É–≥–∞–µ—Ç—Å—è –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–¥–µ–ª–∞—Ç—å error boundary

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ:

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–∞–¥–∞–µ—Ç,

React –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å,

–û—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è.

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ç—ã –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—à—å ads ‚Üí –º–∞—Å—Å–∏–≤ (–∏–ª–∏ —Ö–æ—Ç—è –±—ã []), –≤—Å—ë —É–π–¥—ë—Ç.