import{j as d}from"./index-DK3NXmw2.js";import{r as n}from"./vendor-react-C4_xJuq0.js";import{c}from"./vendor-ui-DiZGdpRh.js";const u="ketmar_favorites";function l(){try{const r=localStorage.getItem(u);if(!r)return[];const a=JSON.parse(r);return Array.isArray(a)?a:[]}catch(r){return console.error("Failed to parse favorites from storage",r),[]}}function v(r){try{localStorage.setItem(u,JSON.stringify(r))}catch(a){console.error("Failed to save favorites",a)}}const i=c((r,a)=>({favorites:[],hydrate(){r({favorites:l()})},toggleFavorite(e){r(t=>{const o=t.favorites.includes(e)?t.favorites.filter(f=>f!==e):[...t.favorites,e];return v(o),{favorites:o}})},isFavorite(e){return a().favorites.includes(e)}}));function m(){const r=i(t=>t.favorites),a=i(t=>t.toggleFavorite),e=i(t=>t.isFavorite);return n.useEffect(()=>{i.getState().hydrate()},[]),{favorites:r,toggleFavorite:a,isFavorite:e}}function y({adId:r}){const{isFavorite:a,toggleFavorite:e}=m(),[t,s]=n.useState(!1),o=async()=>{s(!0),e(r),s(!1)};return d.jsx("button",{type:"button",onClick:o,disabled:t,style:{border:"none",background:"transparent",color:a?"#ef4444":"#94a3b8",fontSize:"1.4rem",cursor:"pointer"},"aria-label":a?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¸Ð· Ð¸Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ð³Ð¾":"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² Ð¸Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ðµ",children:a?"â¤ï¸":"ðŸ¤"})}const x=c((r,a)=>({items:[],addItem:e=>{r(t=>t.items.find(o=>o.adId===e.adId)?{items:t.items.map(o=>o.adId===e.adId?{...o,quantity:o.quantity+e.quantity}:o)}:{items:[...t.items,e]})},removeItem:e=>{r(t=>({items:t.items.filter(s=>s.adId!==e)}))},updateQuantity:(e,t)=>{r(s=>({items:s.items.map(o=>o.adId===e?{...o,quantity:Math.max(1,t)}:o)}))},clear:()=>r({items:[]}),total:()=>a().items.reduce((e,t)=>e+t.price*t.quantity,0)}));export{y as F,x as u};
