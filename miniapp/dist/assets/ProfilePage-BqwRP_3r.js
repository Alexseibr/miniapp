import{u as y,j as e,E as w,g as b}from"./index-C0UB_dVU.js";import{r as a}from"./vendor-react-C4_xJuq0.js";import{u as k}from"./geo-B4_TjvoB.js";import"./vendor-ui-DiZGdpRh.js";function B(){const s=y(t=>t.user),{requestLocation:o,status:n}=k(),[r,l]=a.useState(!1),[c,i]=a.useState(s?.instagram||""),[m,h]=a.useState(s?.showUsername??!0),[d,p]=a.useState(s?.showPhone??!1),[g,u]=a.useState(s?.showInstagram??!0),x=a.useMemo(()=>s?`${s.firstName||""} ${s.lastName||""}`.trim()||s.username||"Пользователь":null,[s]),j=()=>{b();{console.warn("BOT username is not configured");return}};return s?e.jsxs("div",{className:"container",children:[e.jsxs("section",{className:"card",style:{marginBottom:16},children:[e.jsx("h3",{style:{marginTop:0},children:"Личный кабинет"}),e.jsx("p",{style:{marginBottom:4},children:x}),e.jsxs("p",{style:{marginBottom:4},children:["@",s.username||"не указан"]}),e.jsxs("p",{style:{marginBottom:4},children:["Telegram ID: ",s.telegramId]}),e.jsxs("p",{style:{marginBottom:12},children:["Роль: ",s.role||"buyer"]}),s.phone&&r&&e.jsxs("p",{children:["Телефон: ",s.phone]}),s.instagram&&r&&e.jsxs("p",{children:["Instagram: ",s.instagram]}),e.jsxs("div",{className:"row",style:{gap:8,flexWrap:"wrap",marginTop:8},children:[e.jsx("button",{type:"button",className:"secondary",onClick:()=>l(t=>!t),children:r?"Скрыть контакты":"Показать контакты"}),e.jsx("button",{type:"button",className:"secondary",onClick:j,children:"Открыть чат с ботом"})]})]}),e.jsxs("section",{className:"card",children:[e.jsx("h3",{style:{marginTop:0},children:"Настройки контактов"}),e.jsxs("div",{className:"stack",style:{gap:8},children:[e.jsxs("label",{className:"row",style:{gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:m,onChange:t=>h(t.target.checked)}),e.jsx("span",{children:"Показывать username покупателю"})]}),e.jsxs("label",{className:"row",style:{gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:d,onChange:t=>p(t.target.checked)}),e.jsx("span",{children:"Показывать телефон"})]}),e.jsxs("label",{className:"row",style:{gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:g,onChange:t=>u(t.target.checked)}),e.jsx("span",{children:"Показывать Instagram"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"instagram",style:{display:"block",marginBottom:6},children:"Instagram"}),e.jsx("input",{id:"instagram",type:"text",value:c,onChange:t=>i(t.target.value),placeholder:"@username",style:{width:"100%"}})]}),e.jsx("p",{style:{margin:"4px 0",color:"#475467"},children:"Сохранение настроек будет подключено к /api/users/me на следующих этапах."})]})]}),e.jsxs("section",{className:"card",children:[e.jsx("h3",{style:{marginTop:0},children:"Геопозиция"}),e.jsx("p",{style:{marginBottom:12},children:n==="ready"?'Геопозиция обновлена. Объявления "рядом" доступны в ленте.':"Нажмите кнопку ниже, чтобы отправить координаты и видеть ближайшие объявления."}),e.jsx("button",{type:"button",className:"primary",onClick:o,disabled:n==="loading",children:n==="loading"?"Отправляем координаты…":"Обновить геопозицию"})]})]}):e.jsx(w,{title:"Авторизуйтесь через Telegram",description:"Откройте MiniApp из чата с ботом, чтобы подтянуть аккаунт"})}export{B as default};
