# KUFAR-CODE Mobile SPA

Мобильная SPA-версия маркетплейса с авторизацией по телефону, Telegram виджету и одноразовой ссылке из бота. Приложение оптимизировано для ширины до ~600px и использует единый API с backend.

## Функции
- Маршруты для главной, авторизации, профиля, настроек, избранного и объявлений.
- AuthContext с хранением JWT и данных пользователя в `localStorage`.
- API-слой на Axios (`src/api`) с перехватчиком `401` и подстановкой `Authorization: Bearer`.
- Телефонная авторизация через `/api/auth/phone/request` и `/api/auth/phone/verify` с сохранением токена.
- Заглушки для Telegram widget login и входа по токену из бота.
- Bottom navigation и верхний хедер с текущим городом.

## Запуск
```bash
cd mobile
npm install
npm run dev
```

Приложение поднимается на `http://localhost:4173`.

## Переменные окружения
Создайте файл `.env` в `mobile/`:

```bash
VITE_API_BASE_URL=https://api.kufar-code.by/api
```

## Страницы
- `/` — Главная: загружает layout через `GET /api/layout?cityCode=&screen=home` с фолбеком на `cityCode=global`.
- `/auth` — Вход: телефонная авторизация + ссылки на Telegram вход.
- `/profile`, `/profile/edit` — Профиль и редактирование (защищённые маршруты).
- `/my-ads`, `/create-ad` — Мои объявления и создание объявления.
- `/favorites` — Избранное с переходом в карточку объявления.
- `/ad/:id` — Карточка объявления.
- `/settings` — Настройки (город, уведомления, выход).

## AuthContext API
- `login(token, user)` — сохраняет JWT и пользователя.
- `logout()` — очищает данные и редиректит на `/auth`.
- `getAccessToken()` — отдаёт текущий токен для httpClient.

## Минимальные роли
Фронт хранит поле `user.role` и может использовать его для проверки доступа к админским экранам (проверка не реализована в маршрутах по умолчанию).
